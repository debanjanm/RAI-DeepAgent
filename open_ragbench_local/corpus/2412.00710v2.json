{
  "title": "On-Chain Credit Risk Score in Decentralized Finance",
  "sections": [
    {
      "section_id": 0,
      "text": "#### Abstract\n\nDecentralized Finance (DeFi), a financial ecosystem without centralized controlling organization, has introduced a new paradigm for lending and borrowing. However, its capital efficiency remains constrained by the inability to effectively assess the risk associated with each user/wallet. This paper introduces the 'On-Chain Credit Risk Score (OCCR Score) in DeFi', a probabilistic measure designed to quantify the credit risk associated with a wallet. By analyzing historical real-time onchain activity as well as predictive scenarios, the OCCR Score may enable DeFi lending protocols to dynamically adjust Loan-to-Value (LTV) ratios and Liquidation Thresholds (LT) based on the risk profile of a wallet. Unlike existing wallet risk scoring models, which rely on heuristic-based evaluations, the OCCR Score offers a more objective and probabilistic approach, aligning closer to traditional credit risk assessment methodologies. This framework can further enhance DeFi's capital efficiency by incentivizing responsible borrowing behavior and optimizing risk-adjusted returns for lenders.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 1,
      "text": "# 1 Introduction \n\nThe ongoing digital revolution is driving a profound transformation in the financial sector. A key development in this evolution is decentralized finance ( DeFi ), which uses blockchain technology to facilitate open and permissionless financial services (Sahu and Kumar, 2024). DeFi signifies a paradigm shift in financial systems that reshapes the future of global finance. DeFi provides financial services without the intervention of any centralized intermediaries. They operate mainly as automated protocols on a blockchain (Doerr et al., 2021). Although much more new in concept, DeFi is a fast-growing market for quick and safe interaction between lenders and borrowers. It is one of the best ways to seamlessly perform verifiable cross-border transactions in a much faster way compared to Traditional Finance. Numerous avenues can be explored to make DeFi more robust and capital-efficient. However, for such explorations, we need to understand the creditworthiness of each user. It should be noted that 'user' means the specific wallet interacting with the DeFi ecosystem, and in this article, user and wallet are used interchangeably.\n\nUnlike conventional credit scoring, which depends on centralized credit bureaus and financial history of an user, DeFi credit scoring leverages on-chain data and smart contract interactions to evaluate an user's borrowing and repayment behavior. Credit risk scoring is a systematic process used to assess the risk involved in a user's creditworthiness by analyzing their on-chain transaction history, repayment behavior, outstanding liabilities, and other relevant economic indicators. This analytical approach enables financial institutions to quantify the probability of default, facilitating data-driven risk assessment and informed lending decisions (Moghe and Johri, n.d.). An 'On-Chain Credit Risk Score (OCCR Score)' for a wallet might be an answer to quantifying the credit risk of the particular wallet in DeFi ecosystem. Through the OCCR Score of a wallet, we have estimated the probability that the particular wallet may face liquidation when any borrow position is opened. Throughout the paper, we have used borrow positions and loans interchangeably.\n\nThere are different ways to give credit scores to users in the current TradFi landscape, but this is not very prevalent in DeFi. However, there have been previous attempts to measure the creditworthiness of a wallet, including those by Cred (CRED Protocol, n.d.), Credit Data Alliance (CreDA) (CreDA, 2022), Credit scoring of Aave accounts (Wolf et al., 2022) and Levon (Block Analitica, n.d.). The main limitation of these existing credit scoring models is the absence of a comprehensive framework that integrates historical, current, and future predictive scenarios. The Cred Protocol scoring model combines financial metrics such as loan history, account composition, account health, and new credit with qualitative factors such as ecosystem participation and attributes related to trust and transparency, which are described in a very vague way (Packin and Lev-Aretz, 2024). The CreDA credit scoring model relies heavily on social activity data, which could obscure more concrete financial indicators such as asset holdings, lending and borrowing behavior, and off-chain data (CreDA, 2022). This emphasis on decentralized social engagement raises concerns about the model's ability to provide a reliable and objective assessment of creditworthiness (Packin and Lev-Aretz, 2024). In addition, most of the existing scores take natural numbers on a variable scale. This scaling cannot be directly associated with a probability, which might make them subjective in nature. So, we have tried to develop a score that can bridge the three scenarios of historical, current, and predictive future and is equivalent to the probability of default for that particular wallet.\n\nSection 3 explains the overall formulation of the OCCR Score and of each subscore of the OCCR Score. A simulation study has been conducted using synthetically generated data in Section 4. Section 5 discusses the usage of the OCCR Score to make the LTV/LF dynamic for each of the wallets. In addition, in the Appendix Section 7, the different",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 2,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\nstatistical properties of an estimate (Fisher, 1925) are derived in detail. By estimate, we mean the subscores of the OCCR Score.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 3,
      "text": "## 2 Framework\n\nIn this section, we will discuss the overall framework of the OCCR Score and the notational explanations that will help us to develop the OCCR Score for the different wallets. The OCCR score, which is a probability of default of a particular wallet, has a range of $(0,1)$ and is a quantitative measure of the risk of default of the wallet's credit. The risk associated with a wallet is its unreliability of repayment when a borrow position is opened. Thus, to understand the OCCR Score of the wallet, we need to look at both the historical behavior of the wallet, the present dynamics of the wallet such as the current risk subscore, the credit utilization, and other factors, which are explained in detail in Section 3. Here, we go through the terms that have been used extensively in later Sections. $L_{i, j}$ denote the loan amount taken by the $i^{t h}$ wallet corresponding to the $j^{t h}$ loan/position. This random variable $L_{i, j}$ can take any positive real value. Since there might be single and multiple assets that can be provided as collaterals in borrowing, we need to associate different scores to each of the assets depending on the asset's riskiness. $r_{i, j}$ is used to denote the risk associated with each asset. Since this measure is of relative nature, it will have a range of $[0,1]$. Similarly to the loan amount, we also define $C_{i, j, k}$ as the amount provided by the $i^{t h}$ wallet to maintain the position $j^{t h}$ when paid on the $k^{t h}$ asset. We denote the total current holding of a particular $i^{t h}$ wallet by $H_{i} . T_{i, j}$ denotes the amount transacted by the $i^{t h}$ wallet in the $j^{t h}$ transaction. Similarly to the loan amount, all random variables $C_{i, j, k}, H_{i}$, and $T_{i, j}$ can take any real positive value.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 4,
      "text": "## 3 On-Chain Credit Risk (OCCR) Score\n### 3.1 Historical Credit Risk subscore $\\left(\\hat{s}_{h_{i}}\\right)$\n\nIn this section, we will dive into analyzing the historical data for each wallet $i . X_{i, j}$ is a dichotomous random variable, defined as\n\n$$\nX_{i, j}= \\begin{cases}1 & \\text { if loan/position is liquidated } \\\\ 0 & \\text { if loan/position is repayed. }\\end{cases}\n$$\n\nIt should be noted that $P\\left(X_{i, j}\\right)=s_{h_{i}}$. We need to estimate the parameter $s_{h_{i}}$. Thus, we observe the ratio estimate,\n\n$$\n\\hat{s}_{h_{i}}=\\frac{\\sum_{j} w_{i, j} X_{i, j}}{\\sum_{j} w_{i, j}}\n$$\n\nwhere $w_{i, j}=L_{i, j} \\times\\left(1-r_{i, j}\\right) \\times p_{i, j} \\times t_{i, j}$.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 5,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\nThe combined riskiness of all collateral assets is calculated by $r_{i, j}=\\frac{\\sum_{k} C_{i, j, k}\\left(\\frac{\\sigma_{C_{i, j, k}}}{\\sigma_{M a x}}\\right)}{\\sum_{k} C_{i, j, k}}$, for $C_{i, j, k}$ are the collaterals provided for the $j^{\\text {th }}$ loan. Here, by 'Maximum Volatility $\\left(\\sigma_{\\text {Max }}\\right)$ ' we mean the maximum observed volatility among the collateral assets under consideration, while 'Asset Volatility $\\left(\\sigma_{\\text {Asset }}\\right)$ ' is the volatility of the corresponding collateral asset $(k)$ provided for the $j^{\\text {th }}$ loan. $p_{i, j}$ denotes the proportion of the liquidated collateral asset (loan amount) as this proportion might vary depending on the particular DeFi protocol. The recency of the loan is represented by $t_{i, j}$. $t_{i, j}$ will be of the form of,\n\n$$\nt_{i, j}=\\frac{1}{1+e^{-\\left(d t_{i, j}-k\\right)}}\n$$\n\nwhere $d t_{i, j}$ is the corresponding month of particular date when the loan position was commenced, and $k$ is such that the $t_{i, j}$ takes the value of 0.5 for the month which falls in the middle of the whole period.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 6,
      "text": "### 3.2 Current Credit Risk subscore $\\left(\\hat{s}_{c_{i}}\\right)$\n\nThis section deals with the current (open) positions associated with the $i^{\\text {th }}$ wallet. To understand the risk associated with the wallet, we need to understand the possibility of the particular wallet not being able to repay all the outstanding (open) loans if any unprecedented situation arises. Thus, to understand this, we observe the Liquidation at Risk (LaR) value for that particular wallet (Perez et al., 2021). It is to be noted that if the total LaR observed across all loans/positions does not exceed the current holding of the wallet, then the wallet is safe and credible to get further loans. Now, to observe LaR for a particular position, we need to simulate the price path of different assets. Thus, we simulate price paths in sets of a certain number, say 2000, and continue to do so until the difference of the variance of LaR values are convergent. The convergence check is performed using the condition $\\left|\\sigma_{L a R}^{t+1}-\\sigma_{L a R}^{t+1} \\leq \\epsilon\\right|$. Let us define the random variable $Z_{i, j}$, which is a dichotomous variable. $Z_{i, j}$ takes the value 1 , if the total liquidations at risk ( $L a R_{\\text {total }}$ ) exceeds or equals to the current holding of the $i^{\\text {th }}$ wallet, otherwise it is 0 . Thus,\n\n$$\nZ_{i, j}=\\left\\{\\begin{array}{ll}\n1 & \\text { if } L a R_{\\text {total }} \\geq H_{i} \\\\\n0 & \\text { if } L a R_{\\text {total }}<H_{i}\n\\end{array}\\right.\n$$\n\nwhere $H_{i}$ is the current holding for the $i^{\\text {th }}$ wallet, and $E\\left(Z_{i, j}\\right)=s_{c_{i}}$.\nThe estimate of $s_{c_{i}}$ is given by,\n\n$$\n\\hat{s}_{c_{i}}=\\frac{\\sum_{j=1}^{m} Z_{i, j}}{m}\n$$\n\n, $m$ is the total number of times the price path has been simulated.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 7,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance\n### 3.3 Credit Utilization $\\left(\\hat{s}_{c u_{i}}\\right)$\n\nIn this section, we will explain the dependence of the subscore on the utilization of the available credit limit. We define the subscore for credit utilization, taking three different components into account, namely $C_{i, j}$ is the collateral asset (in \\$) given during the opening of the position $j, L T V_{i, j}$ is the Loan-to-Value ratio prevalent at that exact time and $L_{i, j}$ as the loan amount taken at the $j^{\\text {th }}$ position.\n\nThe estimate of $s_{c u_{i}}$ is given by,\n\n$$\n\\hat{s}_{c u_{i}}=\\frac{\\sum_{j}\\left(1-\\left(\\frac{L_{i, j}}{C_{i, j} \\times L T V_{i, j}}\\right)\\right) \\times L_{i, j}}{\\sum_{j} L_{i, j}}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 8,
      "text": "### 3.4 On-Chain Transaction $\\left(\\hat{s}_{c t_{i}}\\right)$\n\nHere, we will try to understand the on-chain transaction of a particular wallet. We will mainly focus on the number and the size of the transaction, with a larger weight given to recent transactions. The on-chain transaction subscore associated with the OCCR Score is given by\n\n$$\n\\hat{s}_{c t_{i}}=\\frac{\\sum_{l} T_{i, l} S_{i, l} t_{i, l}}{\\sum_{l} T_{i, l}}\n$$\n\nwhere $T_{i, l}$ is the $l^{t h}$ transaction amount of the $i^{t h}$ wallet. If the transaction is credited to the wallet $i, S_{i, l}$ is +1 , otherwise, the variable takes a value of -1 .",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 9,
      "text": "### 3.5 New Credit $\\left(\\hat{s}_{n c_{i}}\\right)$\n\nIn this section, we will look at the risk associated with the wallet for taking recent loans in bulk (multiple times within a particular time span). We will be using cluster analysis to study the pattern of the wallet in taking multiple loans in past, and compare that with recent loans opened. Depending on the multiple loan positions opened compared to the earlier cases, a negative point will be assigned to the wallet, given by $\\hat{s}_{n c_{i}}$.\n\nWe denote the loan amount for the $j^{t h}$ loan of the $i^{t h}$ wallet as $L_{i, j}$, and the corresponding date when the loan was taken as $D_{i, j}$. Now, the shortest interval of the $j^{t h}$ loan compared to its two consecutive loans is denoted by $\\Delta D_{i, j}$, where $\\Delta D_{i, j}=\\min \\left(\\left(D_{i, j}-D_{i, j-1}\\right),\\left(D_{i, j+1}-D_{i, j}\\right)\\right)$. Let the mean value of all the loan amounts taken by the wallet in the last month (tentative for now) be denoted by $\\mu_{L_{i}}$, while the mean of the intervals be denoted by $\\mu_{\\Delta D_{i}}$. The total number of loans taken by the $i^{t h}$ wallet in the last month is indicated by $n$. Let $Y_{i, j}$ be a dichotomous random variable such that it is given by\n\n$$\nY_{i, j}= \\begin{cases}1 & \\text { if } L_{i, j} \\geq \\mu_{L_{i}} \\text { and } \\Delta D_{i, j} \\leq \\mu_{\\Delta D_{i}} \\\\ 0 & \\text { if otherwise }\\end{cases}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 10,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\nwith $P\\left(L_{i, j} \\geq \\mu_{L_{i}}\\right.$ and $\\left.\\Delta D_{i, j} \\leq \\mu_{\\Delta D_{i}}\\right)=P\\left(L_{i, j} \\geq \\mu_{L_{i}}\\right) \\times P\\left(\\Delta D_{i, j} \\leq \\mu_{\\Delta D_{i}}\\right)=s_{n c_{i}}$.\nNow, the new credit risk subscore is given by,\n\n$$\n\\hat{s}_{n c_{i}}=\\frac{\\sum_{j=1}^{n} Y_{i, j}}{n}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 11,
      "text": "### 3.6 OCCR Score\n\nThe OCCR Score for the particular wallet is found using a weighted average of all the above credit risk subscores obtained. The weight associated to each of the subscores is $0.35,0.25,0.15,0.15,0.10$ to $\\hat{s}_{h_{i}}, \\hat{s}_{c_{i}}, \\hat{s}_{c u_{i}}, \\hat{s}_{c t_{i}}$ and $\\hat{s}_{n c_{i}}$ respectively. Thus, the OCCR Score is obtained as\n\n$$\n\\text { OCCR Score }=0.35 \\times \\hat{s}_{h_{i}}+0.25 \\times \\hat{s}_{c_{i}}+0.15 \\times\\left(1-\\hat{s}_{c u_{i}}\\right)-0.15 \\times \\hat{s}_{c t_{i}}+0.10 \\times \\hat{s}_{n c_{i}}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 12,
      "text": "## 4 Simulation\n\nAny theoretical construe needs to be backed by a corresponding simulation study. In this section, we have tried to synthetically generate data for different wallets and understand the theoretical results claimed in Section 3. For the simulation study, we have taken different parameter values to generate transactions and borrowing positions for a wallet. The parameter values include the loan amount, the collateral amount, the timestamp, the asset provided as collateral, and others.\n\nIn our simulation study for the on-chain transaction subscore $\\left(\\hat{s}_{c t_{i}}\\right)$, we generated synthetic data for different wallets by varying key parameters such as the probability of credit transactions $p$. This probability is a measure of the probability that the wallet will have an amount credited to the wallet. Usually, transaction amounts are heavy-tailed in distribution. Thus, we assume that the transaction amount follows a Pareto distribution with shape parameter $\\alpha$ and scale $x_{\\text {min }}$. For each transaction, we randomly generated the amount of the transaction using a Pareto distribution (with the specified $\\alpha$ and $x_{\\text {min }}$ ) (Arnold, 2014), assigned a sign based on whether it was a credit or debit (which is also generated randomly from the Bernoulli distribution with a success probability of $p$ ). We weighted it by a recency score drawn uniformly from $[0,1]$. We then calculated the on-chain transaction subscore by taking the weighted sum of these transactions and normalizing it by the total transaction amount. For each wallet, we assumed a total of 60,000 transactions. In addition, the process was repeated for a total of 5000 times and the results obtained are tabulated in Table 1.\n\nIn Table 1, we have presented five different scenarios assuming different parameter values, which distinguish the specific wallet. In reality, we can observe that the borrowing or transaction patterns change from wallet to wallet. To mimic the different wallets, we have taken different values of the parameters such that all scenarios encompass both negative and positive values for on-chain transaction subscore. In all rows of Table 1, we can see that the theoretical values are nearly equal to the estimated ones. Also, in all rows, the coverage probability is near 0.95 or higher, which means that the confidence interval constructed using the estimated values includes the theoretical mean in all the scenarios. Thus, it can be said that the estimate is both unbiased and reliable (Voinov and Nikulin, 2012). Also, since",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 13,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\nTable 1: Estimated On-Chain Transaction subscore $\\left(\\hat{s}_{c t_{i}}\\right)$ based on 5000 simulations along with corresponding Sample Standard Error (SSE), Asymptotic Standard Error (ASE), Coverage Probability (CP).\n\n![table_0](table_0)\n\nthe ASE and SSE values are very close to each other and also very low, it implies that the estimator is also more consistent.\n\nTable 2: Estimated Credit Utilization subscore $\\left(\\hat{s}_{c u_{i}}\\right)$ based on 5000 simulations along with corresponding Sample Standard Error (SSE), Asymptotic Standard Error (ASE), Coverage Probability (CP).\n\n![table_1](table_1)\n\nTable 2 elaborates on the simulated results and compares those results with the theoretically obtained results for the credit utilization subscore $\\left(\\hat{s}_{c u_{i}}\\right)$. Here, we also observe that the theoretical and the simulated estimator values are nearly the same, with pretty low ASE and SSE values. Thus, we can surely say that the credit utilization subscore estimator is also unbiased, reliable, and consistent. Simulation studies for other subscores can be done along similar lines as above.",
      "tables": {
        "table_0": "| No. | $\\left(p, \\alpha, x_{\\min }\\right)$ | $\\hat{s}_{c t_{i}}\\left(s_{c t_{i}}\\right)$ | ASE | SSE | $\\widehat{C P}$ |\n| :--: | :--: | :--: | :--: | :--: | :--: |\n| 1 | $(0.60,2.10,300)$ | $0.0997(0.10)$ | 0.000031 | 0.000019 | 0.985 |\n| 2 | $(0.35,2.25,300)$ | $-0.1496(-0.15)$ | 0.000014 | 0.000013 | 0.957 |\n| 3 | $(0.80,2.10,320)$ | $0.2991(0.30)$ | 0.000023 | 0.000014 | 0.984 |\n| 4 | $(0.68,2.60,110)$ | $0.1796(0.18)$ | 0.000008 | 0.000009 | 0.946 |\n| 5 | $(0.42,2.06,108)$ | $-0.0798(-0.08)$ | 0.000049 | 0.000021 | 0.992 |",
        "table_1": "| No. | $\\left(\\alpha, x_{\\min }, l_{\\min }, l_{\\max }\\right)$ | $\\hat{s}_{c t_{i}}\\left(s_{c t_{i}}\\right)$ | ASE | SSE | $\\widehat{C P}$ |\n| :--: | :--: | :--: | :--: | :--: | :--: |\n| 1 | $(2.10,300,0.50,0.90)$ | $0.333333(0.333344)$ | 0.0000059 | 0.0000035 | 0.986 |\n| 2 | $(2.30,210,0.64,0.92)$ | $0.333359(0.333338)$ | 0.0000025 | 0.0000022 | 0.965 |\n| 3 | $(2.80,50,0.62,0.84)$ | $0.333341(0.333336)$ | 0.0000014 | 0.0000014 | 0.952 |\n| 4 | $(2.45,680,0.46,0.74)$ | $0.333368(0.333337)$ | 0.0000019 | 0.0000019 | 0.957 |\n| 5 | $(2.45,680,0.46,0.94)$ | $0.333351(0.333337)$ | 0.0000020 | 0.0000018 | 0.958 |"
      },
      "images": {}
    },
    {
      "section_id": 14,
      "text": "## 5 Dynamic LTV Adjustment\n\nDynamic LTV adjustment means that the LTV ratio offered to a borrower changes based on their OCCR Score, which quantifies their creditworthiness. A wallet with a lower OCCR Score (indicating a good repayment history and low default risk) could be rewarded with a higher LTV ratio (more borrowing power against their collateral), while a wallet with a high OCCR Score would be offered the LTV ratio prevalent in the market at that time.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 15,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance\n### 5.1 Stochastic Modeling of Dynamic LTV\n\nDynamic adjustment of LTV can be modeled as a stochastic process, which means that the LTV ratio is not fixed but changes over time, influenced by the borrower's OCCR score. A stochastic process accounts for randomness and uncertainty in how factors such as market conditions or borrower behavior evolve, making the model adaptable to real-world scenarios.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 16,
      "text": "### 5.1.1 Basic Model Structure\n\nLet's define a time-dependent LTV ratio, $L T V(t)$, which is adjusted according to the borrower's OCCR score at time $t$. We can express this as follows.\n\n$$\nL T V(t)=L T V_{\\text {fixed }}-\\min \\left(f\\left(O C C_{\\text {Score }, t}\\right), 0\\right)\n$$\n\nWhere:\n\n- $L T V(t)$ is the LTV ratio at time $t$,\n- $L T V_{\\text {fixed }}$ is the base or market-determined LTV ratio that would be applied in the absence of any OCCR score,\n- $f\\left(O C C \\_S c o r e_{t}\\right)$ is an adjustment function that modifies the LTV based on the OCCR Score at time $t$.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 17,
      "text": "### 5.1.2 Adjustment Function $f\\left(O C C R \\_S c o r e_{t}\\right)$\n\nThe adjustment function, $f\\left(O C C R \\_S c o r e_{t}\\right)$, increases or decreases the LTV ratio depending on the borrower's risk profile at any given time. It could take several forms, such as a linear or non-linear relationship between the OCCR score and the LTV ratio. For example:\n\n$$\nf\\left(O C C R \\_S c o r e_{t}\\right)=\\alpha \\cdot\\left(O C C R \\_S c o r e_{t}-O C C R_{\\text {avg }}\\right)\n$$\n\nWhere:\n\n- $\\alpha$ is a scaling parameter that controls the sensitivity of LTV adjustments based on the OCCR Score, Use past data to backtest how different $\\alpha$ values would have impacted loan performance and liquidation risks.\n- $O C C R \\_S c o r e_{t}$ is the OCCR score at time $t$,\n- $O C C R_{\\text {avg }}$ is the average OCCR score in the market.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 18,
      "text": "## 6 Conclusion\n\nIn this paper, we have performed a detailed analysis of historical credit risk, current credit risk, new credit, credit utilization, and on-chain transaction subscores, providing valuable insight into their expectations, variances, and consistency. Under the assumptions outlined, each estimator is consistent in estimating the respective credit risk score for the wallet. In Section 4 and Appendix 7, we have tried to establish the unbiased (Voinov and Nikulin, 2012) nature",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 19,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\nof all subscores, using simulation and theoretical studies, respectively. Collectively, these estimators offer a comprehensive approach to assessing wallet risk across different time frames and transaction types, facilitating more accurate and reliable credit risk assessments. In Section 4, we have synthetically generated the transaction data for different wallets to emulate the real-life scenario and compared the simulated results with the theoretical results. For two of the subscores, it was observed that both results matched a high coverage probability score. Thus, it can be claimed that the estimators are reliable for practical applications.\n\nThe 'On-Chain Credit Risk Score (OCCR Score)' of wallets will help lending borrowing protocols and other DeFi institutes to understand the risk involved in allowing a wallet to open borrow position and thus may change the Loan-to-Value (LTV) ratio and subsequently the Liquidation Threshold (LT) if required. Through the OCCR score, we are trying to tailor the LT/LTV for particular wallets, hence enabling 'walletized finance'. If a lower 'OCCR Scoring' is associated with a wallet, DeFi institutions may be incentivized to offer them borrow positions at a higher LT/LTV ratio than observed in the market, while for wallets maintaining a higher 'OCCR Scoring' value, they may decide on keeping the LT/LTV ratio the same as the one prevalent in the market. This will encourage wallets to maintain a lower credit risk score to get loans at a much better (higher) LT/LTV ratio value than what is prevalent in the market. This might help the DeFi market to be more capital-efficient while maintaining a less risky approach. It should be noted that a wallet that enters the DeFi ecosystem for the very first time will receive a mean OCCR Score since that wallet has yet to make its first on-chain transaction.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 20,
      "text": "# 7 Appendix\n### 7.1 Expectation, Variance and Consistency of Historical Sub Score\n\nIn this section, we derive the approximate expectation and variance of the historical subscore:\n\n$$\n\\hat{s}_{h_{i}}=\\frac{N_{i}}{D_{i}}=\\frac{\\sum_{j=1}^{n} w_{i, j} X_{i, j}}{\\sum_{j=1}^{n} w_{i, j}}\n$$\n\nwhere for each loan (or position) $j$ :\n\n- $X_{i, j}$ is a Bernoulli variable with\n\n$$\nP\\left(X_{i, j}=1\\right)=s_{h_{i}}, \\quad P\\left(X_{i, j}=0\\right)=1-s_{h_{i}} \\quad \\Longrightarrow \\quad \\mathbb{E}\\left[X_{i, j}\\right]=s_{h_{i}}\n$$\n\n- The weight is given by\n\n$$\nw_{i, j}=L_{i, j}\\left(1-r_{i, j}\\right) p t_{i, j}\n$$\n\nwith:\n\n- Loan Amount:\n\n$$\nL_{i, j} \\mid(\\text { Itv }, \\text { collateral }) \\sim \\operatorname{Uniform}(0, \\text { Itv } \\times \\text { collateral })\n$$\n\nthen\n\n$$\n\\mathbb{E}\\left[L_{i, j} \\mid \\text { Itv }, \\text { collateral }\\right]=\\frac{\\operatorname{Itv} \\times \\text { collateral }}{2}\n$$\n\nIf\n\n$$\n\\text { Itv } \\sim \\operatorname{Uniform}\\left(l_{\\min }, l_{\\max }\\right) \\quad \\text { and } \\quad \\mathbb{E}[\\text { Itv }]=\\frac{l_{\\min }+l_{\\max }}{2}\n$$\n\nand if the collateral is Pareto distributed with parameters $\\alpha$ and scale $m$, so that\n\n$$\n\\mathbb{E}[\\text { collateral }]=\\frac{\\alpha m}{\\alpha-1}\n$$\n\nthen, by independence,\n\n$$\n\\mathbb{E}\\left[L_{i, j}\\right]=\\frac{\\left(l_{\\min }+l_{\\max }\\right) \\alpha m}{4(\\alpha-1)}\n$$\n\nSimilarly, using $\\mathbb{E}\\left[X^{2}\\right]=\\frac{a^{2}}{3}$ for a Uniform $(0, a)$ variable,\n\n$$\n\\mathbb{E}\\left[L_{i, j}^{2}\\right]=\\frac{\\left(l_{\\min }^{2}+l_{\\min } l_{\\max }+l_{\\max }^{2}\\right) \\alpha m^{2}}{9(\\alpha-2)}\n$$\n\n- Risk Factor: If $r_{i, j} \\sim \\operatorname{Uniform}(0,1)$, then\n\n$$\n\\mathbb{E}\\left[1-r_{i, j}\\right]=\\frac{1}{2}, \\quad \\mathbb{E}\\left[\\left(1-r_{i, j}\\right)^{2}\\right]=\\frac{1}{3}\n$$\n\n- Recency: Assuming $t_{i, j} \\sim \\operatorname{Uniform}(0,1)$,\n\n$$\n\\mathbb{E}\\left[t_{i, j}\\right]=\\frac{1}{2}, \\quad \\mathbb{E}\\left[t_{i, j}^{2}\\right]=\\frac{1}{3}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 21,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\n- Liquidation Probability: Here, $p$ is a constant.\n\nUnder the assumption of independence of the components, the first and second moments of the weight are:\n\n$$\n\\mathbb{E}\\left[w_{i, j}\\right]=\\mathbb{E}\\left[L_{i, j}\\right] \\cdot \\frac{1}{2} \\cdot p \\cdot \\frac{1}{2}=\\frac{p \\mathbb{E}\\left[L_{i, j}\\right]}{4}\n$$\n\nand\n\n$$\n\\mathbb{E}\\left[w_{i, j}^{2}\\right]=\\mathbb{E}\\left[L_{i, j}^{2}\\right] \\cdot \\frac{1}{3} \\cdot p^{2} \\cdot \\frac{1}{3}=\\frac{p^{2} \\mathbb{E}\\left[L_{i, j}^{2}\\right]}{9}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 22,
      "text": "### 7.1.1 Expectation of the Historical Credit Risk Score\n\nDefine\n\n$$\nN_{i}=\\sum_{j=1}^{n} w_{i, j} X_{i, j} \\quad \\text { and } \\quad D_{i}=\\sum_{j=1}^{n} w_{i, j}\n$$\n\nSince $w_{i, j}$ and $X_{i, j}$ are independent,\n\n$$\n\\mathbb{E}\\left[w_{i, j} X_{i, j}\\right]=\\mathbb{E}\\left[w_{i, j}\\right] \\mathbb{E}\\left[X_{i, j}\\right]=s_{h_{i}} \\mathbb{E}\\left[w_{i, j}\\right]\n$$\n\nso that\n\n$$\n\\mathbb{E}\\left[N_{i}\\right]=s_{h_{i}} \\sum_{j=1}^{n} \\mathbb{E}\\left[w_{i, j}\\right], \\quad \\mathbb{E}\\left[D_{i}\\right]=\\sum_{j=1}^{n} \\mathbb{E}\\left[w_{i, j}\\right]\n$$\n\nUsing the approximation\n\n$$\n\\mathbb{E}\\left[\\frac{1}{D_{i}}\\right] \\approx \\frac{1}{\\mathbb{E}\\left[D_{i}\\right]}+\\frac{\\operatorname{Var}\\left(D_{i}\\right)}{\\left(\\mathbb{E}\\left[D_{i}\\right]\\right)^{3}}\n$$\n\nwe have\n\n$$\n\\begin{aligned}\n\\mathbb{E}\\left[\\hat{s}_{h_{i}}\\right] & \\approx \\mathbb{E}\\left[N_{i}\\right] \\cdot \\mathbb{E}\\left[\\frac{1}{D_{i}}\\right] \\\\\n& \\approx\\left(s_{h_{i}} \\sum_{j=1}^{n} \\mathbb{E}\\left[w_{i, j}\\right]\\right)\\left(\\frac{1}{\\sum_{j=1}^{n} \\mathbb{E}\\left[w_{i, j}\\right]}+\\frac{\\operatorname{Var}\\left(D_{i}\\right)}{\\left(\\sum_{j=1}^{n} \\mathbb{E}\\left[w_{i, j}\\right]\\right)^{3}}\\right) \\\\\n& =s_{h_{i}}\\left(1+\\frac{\\operatorname{Var}\\left(D_{i}\\right)}{\\left(\\sum_{j=1}^{n} \\mathbb{E}\\left[w_{i, j}\\right]\\right)^{2}}\\right)\n\\end{aligned}\n$$\n\nIn the special case where all loans are identically distributed (denoting $\\mu_{w}=\\mathbb{E}\\left[w_{i, j}\\right]$ and $\\mu_{w^{2}}=\\mathbb{E}\\left[w_{i, j}^{2}\\right]$ ), we have\n\n$$\n\\mathbb{E}\\left[D_{i}\\right]=n \\mu_{w}, \\quad \\operatorname{Var}\\left(D_{i}\\right)=n\\left(\\mu_{w^{2}}-\\mu_{w}^{2}\\right)\n$$\n\nso that\n\n$$\n\\mathbb{E}\\left[\\hat{s}_{h_{i}}\\right] \\approx s_{h_{i}}\\left(1+\\frac{\\mu_{w^{2}}-\\mu_{w}^{2}}{n \\mu_{w}^{2}}\\right)\n$$\n\nIf the variation in $D_{i}$ is negligible, then $\\mathbb{E}\\left[\\hat{s}_{h_{i}}\\right] \\approx s_{h_{i}}$.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 23,
      "text": "# 7.1.2 Variance of the Historical Credit Risk Score \n\nWe use the first-order Delta method to approximate the variance of the ratio\n\n$$\n\\hat{s}_{h_{i}}=\\frac{N_{i}}{D_{i}}\n$$\n\nStep 1. Partial Derivatives: Define\n\n$$\nf\\left(N_{i}, D_{i}\\right)=\\frac{N_{i}}{D_{i}}\n$$\n\nThen\n\n$$\n\\frac{\\partial f}{\\partial N_{i}}=\\frac{1}{D_{i}}, \\quad \\frac{\\partial f}{\\partial D_{i}}=-\\frac{N_{i}}{D_{i}^{2}}\n$$\n\nEvaluating at the mean values $\\mathbb{E}\\left[N_{i}\\right]=s_{h_{i}} \\mathbb{E}\\left[D_{i}\\right]$ and $\\mathbb{E}\\left[D_{i}\\right]$, we have:\n\n$$\n\\left.\\frac{\\partial f}{\\partial N_{i}}\\right|_{\\mathbb{E}}=\\frac{1}{\\mathbb{E}\\left[D_{i}\\right]}, \\quad\\left.\\frac{\\partial f}{\\partial D_{i}}\\right|_{\\mathbb{E}}=-\\frac{s_{h_{i}}}{\\mathbb{E}\\left[D_{i}\\right]}\n$$\n\nStep 2. Delta Method Formula: The variance is approximated by\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{h_{i}}\\right) \\approx\\left(\\frac{1}{\\mathbb{E}\\left[D_{i}\\right]}\\right)^{2} \\operatorname{Var}\\left(N_{i}\\right)+\\left(\\frac{s_{h_{i}}}{\\mathbb{E}\\left[D_{i}\\right]}\\right)^{2} \\operatorname{Var}\\left(D_{i}\\right)-2 \\frac{s_{h_{i}}}{\\left(\\mathbb{E}\\left[D_{i}\\right]\\right)^{2}} \\operatorname{Cov}\\left(N_{i}, D_{i}\\right)\n$$\n\nStep 3. Variance of $N_{i}$ : Since\n\n$$\nN_{i}=\\sum_{j=1}^{n} w_{i, j} X_{i, j}\n$$\n\nand using the independence of $w_{i, j}$ and $X_{i, j}$, we have for each $j$ :\n\n$$\n\\begin{aligned}\n\\operatorname{Var}\\left(w_{i, j} X_{i, j}\\right) & =\\mathbb{E}\\left[\\left(w_{i, j} X_{i, j}\\right)^{2}\\right]-\\left(\\mathbb{E}\\left[w_{i, j} X_{i, j}\\right]\\right)^{2} \\\\\n& =s_{h_{i}} \\mathbb{E}\\left[w_{i, j}^{2}\\right]-s_{h_{i}}^{2}\\left(\\mathbb{E}\\left[w_{i, j}\\right]\\right)^{2}\n\\end{aligned}\n$$\n\nSumming over $j$ :\n\n$$\n\\operatorname{Var}\\left(N_{i}\\right)=\\sum_{j=1}^{n}\\left[s_{h_{i}} \\mathbb{E}\\left[w_{i, j}^{2}\\right]-s_{h_{i}}^{2}\\left(\\mathbb{E}\\left[w_{i, j}\\right]\\right)^{2}\\right]\n$$\n\nStep 4. Variance of $D_{i}$ : Since\n\n$$\nD_{i}=\\sum_{j=1}^{n} w_{i, j}\n$$\n\nwe have\n\n$$\n\\operatorname{Var}\\left(D_{i}\\right)=\\sum_{j=1}^{n}\\left[\\mathbb{E}\\left[w_{i, j}^{2}\\right]-\\left(\\mathbb{E}\\left[w_{i, j}\\right]\\right)^{2}\\right]\n$$\n\nStep 5. Covariance between $N_{i}$ and $D_{i}$ : Since only the same index $j$ contributes,\n\n$$\n\\operatorname{Cov}\\left(N_{i}, D_{i}\\right)=\\sum_{j=1}^{n} \\operatorname{Cov}\\left(w_{i, j} X_{i, j}, w_{i, j}\\right)\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 24,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\nFor each $j$ :\n\n$$\n\\operatorname{Cov}\\left(w_{i, j} X_{i, j}, w_{i, j}\\right)=s_{h_{i}}\\left(\\mathbb{E}\\left[w_{i, j}^{2}\\right]-\\left(\\mathbb{E}\\left[w_{i, j}\\right]\\right)^{2}\\right)\n$$\n\nThus,\n\n$$\n\\operatorname{Cov}\\left(N_{i}, D_{i}\\right)=s_{h_{i}} \\operatorname{Var}\\left(D_{i}\\right)\n$$\n\nStep 6. Combine the Pieces: Substitute into the Delta formula:\n\n$$\n\\begin{aligned}\n\\operatorname{Var}\\left(\\hat{s}_{h_{i}}\\right) & \\approx \\frac{\\operatorname{Var}\\left(N_{i}\\right)}{\\left(\\mathbb{E}\\left[D_{i}\\right]\\right)^{2}}+\\frac{s_{h_{i}}^{2} \\operatorname{Var}\\left(D_{i}\\right)}{\\left(\\mathbb{E}\\left[D_{i}\\right]\\right)^{2}}-2 \\frac{s_{h_{i}}}{\\left(\\mathbb{E}\\left[D_{i}\\right]\\right)^{2}} s_{h_{i}} \\operatorname{Var}\\left(D_{i}\\right) \\\\\n& =\\frac{\\operatorname{Var}\\left(N_{i}\\right)}{\\left(\\mathbb{E}\\left[D_{i}\\right]\\right)^{2}}-\\frac{s_{h_{i}}^{2} \\operatorname{Var}\\left(D_{i}\\right)}{\\left(\\mathbb{E}\\left[D_{i}\\right]\\right)^{2}}\n\\end{aligned}\n$$\n\nIn the case of $n$ identical loans, with $\\mu_{w}=\\mathbb{E}\\left[w_{i, j}\\right]$ and $\\mu_{w^{2}}=\\mathbb{E}\\left[w_{i, j}^{2}\\right]$, we have:\n\n$$\n\\mathbb{E}\\left[D_{i}\\right]=n \\mu_{w}, \\quad \\operatorname{Var}\\left(N_{i}\\right)=n\\left[s_{h_{i}} \\mu_{w^{2}}-s_{h_{i}}^{2} \\mu_{w}^{2}\\right], \\quad \\operatorname{Var}\\left(D_{i}\\right)=n\\left[\\mu_{w^{2}}-\\mu_{w}^{2}\\right]\n$$\n\nThen,\n\n$$\n\\begin{aligned}\n\\operatorname{Var}\\left(\\hat{s}_{h_{i}}\\right) & \\approx \\frac{n\\left[s_{h_{i}} \\mu_{w^{2}}-s_{h_{i}}^{2} \\mu_{w}^{2}\\right]}{n^{2} \\mu_{w}^{2}}-\\frac{s_{h_{i}}^{2} n\\left[\\mu_{w^{2}}-\\mu_{w}^{2}\\right]}{n^{2} \\mu_{w}^{2}} \\\\\n& =\\frac{s_{h_{i}} \\mu_{w^{2}}-s_{h_{i}}^{2} \\mu_{w}^{2}-s_{h_{i}}^{2} \\mu_{w^{2}}+s_{h_{i}}^{2} \\mu_{w}^{2}}{n \\mu_{w}^{2}} \\\\\n& =\\frac{s_{h_{i}}\\left(1-s_{h_{i}}\\right) \\mu_{w^{2}}}{n \\mu_{w}^{2}}\n\\end{aligned}\n$$\n\nRecalling that\n\n$$\n\\mu_{w}=\\frac{p \\mathbb{E}\\left[L_{i, j}\\right]}{4}, \\quad \\mu_{w^{2}}=\\frac{p^{2} \\mathbb{E}\\left[L_{i, j}^{2}\\right]}{9}\n$$\n\nwe have:\n\n$$\n\\frac{\\mu_{w^{2}}}{\\mu_{w}^{2}}=\\frac{\\frac{p^{2} \\mathbb{E}\\left[L_{i, j}^{2}\\right]}{9}}{\\left(\\frac{p \\mathbb{E}\\left[L_{i, j}\\right]}{4}\\right)^{2}}=\\frac{16 \\mathbb{E}\\left[L_{i, j}^{2}\\right]}{9 \\mathbb{E}\\left[L_{i, j}\\right]^{2}}\n$$\n\nThus, the variance becomes:\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{h_{i}}\\right) \\approx \\frac{16 s_{h_{i}}\\left(1-s_{h_{i}}\\right) \\mathbb{E}\\left[L_{i, j}^{2}\\right]}{9 n\\left(\\mathbb{E}\\left[L_{i, j}\\right]\\right)^{2}}\n$$\n\nThis completes the full derivation of the expectation and variance of the historical sub score.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 25,
      "text": "### 7.1.3 Consistency of the Historical Credit Risk Score\n\nFor the estimator\n\n$$\n\\hat{s}_{h_{i}}=\\frac{N_{i}}{D_{i}}=\\frac{\\sum_{j=1}^{n} w_{i, j} X_{i, j}}{\\sum_{j=1}^{n} w_{i, j}}\n$$\n\nwe have shown that\n\n$$\n\\mathbb{E}\\left[\\hat{s}_{h_{i}}\\right] \\approx s_{h_{i}} \\quad \\text { and } \\quad \\operatorname{Var}\\left(\\hat{s}_{h_{i}}\\right) \\approx \\frac{16 s_{h_{i}}\\left(1-s_{h_{i}}\\right) \\mathbb{E}\\left[L_{i, j}^{2}\\right]}{9 n\\left(\\mathbb{E}\\left[L_{i, j}\\right]\\right)^{2}}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 26,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\nSince the variance of $\\hat{s}_{h_{i}}$ is proportional to $1 / n$, it tends to zero as $n \\rightarrow \\infty$. Thus, the estimator $\\hat{s}_{h_{i}}$ converges in probability to $s_{h_{i}}$, i.e.,\n\n$$\n\\hat{s}_{h_{i}} \\xrightarrow{p} s_{h_{i}} \\quad \\text { as } \\quad n \\rightarrow \\infty\n$$\n\nThis demonstrates the consistency of the historical sub score.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 27,
      "text": "### 7.2 Expectation, Variance, and Consistency of Current Credit Risk Score $\\left(\\hat{s}_{c_{i}}\\right)$\n\nWe define the Current Wallet Risk Score estimator for the $i^{\\text {th }}$ wallet as:\n\n$$\n\\hat{s}_{c_{i}}=\\frac{\\sum_{j=1}^{k} Z_{i, j}}{k}\n$$\n\nwhere $Z_{i, j}$ is a Bernoulli random variable with mean $s_{c_{i}}=\\mathbb{E}\\left[Z_{i, j}\\right]$. Therefore, $Z_{i, j} \\sim \\operatorname{Bernoulli}\\left(s_{c_{i}}\\right)$, and $\\sum_{j=1}^{k} Z_{i, j} \\sim \\operatorname{Binomial}\\left(k, s_{c_{i}}\\right)$.\nAssuming both Liquidation at Risk (LaR) and Holding ( $H$ ) follow Pareto distributions:\n\n$$\n\\begin{aligned}\nL a R & \\sim \\operatorname{Pareto}\\left(\\alpha_{L}, x_{m}^{L}\\right) \\\\\nH & \\sim \\operatorname{Pareto}\\left(\\alpha_{H}, x_{m}^{H}\\right)\n\\end{aligned}\n$$\n\nwhere $x_{m}^{L}, x_{m}^{H}$ are the scale parameters, and $\\alpha_{L}, \\alpha_{H}$ are the shape parameters. The probability of liquidation risk exceeding holdings is given by:\n\n$$\nP(L a R>H)=\\int_{x_{m}^{H}}^{\\infty} P(L a R>h) f_{H}(h) d h\n$$\n\nUsing the cumulative distribution function (CDF) of LaR,\n\n$$\nP(L a R>h)=\\left(\\frac{x_{m}^{L}}{h}\\right)^{\\alpha_{L}}, \\quad h \\geq x_{m}^{L}\n$$\n\nSubstituting this into the integral,\n\n$$\nP(L a R>H)=\\int_{x_{m}^{H}}^{\\infty}\\left(\\frac{x_{m}^{L}}{h}\\right)^{\\alpha_{L}} \\frac{\\alpha_{H}\\left(x_{m}^{H}\\right)^{\\alpha_{H}}}{h^{\\alpha_{H}+1}} d h\n$$\n\nThis simplifies to:\n\n$$\nP(L a R>H)=\\alpha_{H}\\left(x_{m}^{H}\\right)^{\\alpha_{H}}\\left(x_{m}^{L}\\right)^{\\alpha_{L}} \\int_{x_{m}^{H}}^{\\infty} h^{-\\alpha_{L}-\\alpha_{H}-1} d h\n$$\n\nEvaluating the integral:\n\n$$\n\\int_{x_{m}^{H}}^{\\infty} h^{-\\left(\\alpha_{L}+\\alpha_{H}+1\\right)} d h=\\frac{x_{m}^{H}}{\\left(\\alpha_{L}+\\alpha_{H}\\right)}\\left(x_{m}^{H}\\right)^{-\\left(\\alpha_{L}+\\alpha_{H}\\right)}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 28,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\nThus, we obtain:\n\n$$\nP(L a R>H)=\\frac{\\alpha_{H}}{\\alpha_{L}+\\alpha_{H}}\\left(\\frac{x_{m}^{L}}{x_{m}^{H}}\\right)^{\\alpha_{L}}\n$$\n\nTherefore, the expected value of $Z_{i, j}$, which determines the credit risk subscore, is given by:\n\n$$\nE\\left(Z_{i, j}\\right)=\\hat{s}_{c_{i}}=P(L a R>H)\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 29,
      "text": "### 7.2.1 Expectation of $\\hat{s}_{c_{i}}$\n\nThe expectation of $\\hat{s}_{c_{i}}$ is given by:\n\n$$\n\\mathbb{E}\\left[\\hat{s}_{c_{i}}\\right]=\\mathbb{E}\\left[\\frac{\\sum_{j=1}^{k} Z_{i, j}}{k}\\right]\n$$\n\nUsing the linearity of expectation:\n\n$$\n\\mathbb{E}\\left[\\hat{s}_{c_{i}}\\right]=\\mathbb{E}\\left[\\frac{\\sum_{j=1}^{k} Z_{i, j}}{k}\\right]=\\frac{\\mathbb{E}\\left[\\sum_{j=1}^{k} Z_{i, j}\\right]}{k}\n$$\n\nSince $\\mathbb{E}\\left[Z_{i, j}\\right]=s_{c_{i}}$ :\n\n$$\n\\mathbb{E}\\left[\\sum_{j=1}^{k} Z_{i, j}\\right]=k \\cdot s_{c_{i}}\n$$\n\nThus:\n\n$$\n\\mathbb{E}\\left[\\hat{s}_{c_{i}}\\right]=\\frac{k \\cdot s_{c_{i}}}{k}=s_{c_{i}}\n$$\n\nThis shows that $\\hat{s}_{c_{i}}$ is an unbiased estimator for $s_{c_{i}}$.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 30,
      "text": "### 7.2.2 Variance of $\\hat{s}_{c_{i}}$\n\nThe variance of $\\hat{s}_{c_{i}}$ is given by:\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{c_{i}}\\right)=\\operatorname{Var}\\left(\\frac{\\sum_{j=1}^{k} Z_{i, j}}{k}\\right)\n$$\n\nSince the variance of a constant (1) is zero:\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{c_{i}}\\right)=\\operatorname{Var}\\left(\\frac{\\sum_{j=1}^{k} Z_{i, j}}{k}\\right)\n$$\n\nFor a Binomial random variable $\\sum_{j=1}^{k} Z_{i, j} \\sim \\operatorname{Binomial}\\left(k, s_{c_{i}}\\right)$, we know that:\n\n$$\n\\operatorname{Var}\\left(\\sum_{j=1}^{k} Z_{i, j}\\right)=k \\cdot s_{c_{i}} \\cdot\\left(1-s_{c_{i}}\\right)\n$$\n\nThus:\n\n$$\n\\operatorname{Var}\\left(\\frac{\\sum_{j=1}^{k} Z_{i, j}}{k}\\right)=\\frac{k \\cdot s_{c_{i}} \\cdot\\left(1-s_{c_{i}}\\right)}{k^{2}}=\\frac{s_{c_{i}} \\cdot\\left(1-s_{c_{i}}\\right)}{k}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 31,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\nTherefore, the variance of $\\hat{s}_{c_{i}}$ is:\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{c_{i}}\\right)=\\frac{s_{c_{i}}\\left(1-s_{c_{i}}\\right)}{k}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 32,
      "text": "### 7.2.3 Consistency of $\\hat{s}_{c_{i}}$\n\nAs $k \\rightarrow \\infty$, the variance $\\operatorname{Var}\\left(\\hat{s}_{c_{i}}\\right)=\\frac{s_{c_{i}}\\left(1-s_{c_{i}}\\right)}{k} \\rightarrow 0$. Therefore, $\\hat{s}_{c_{i}}$ is a consistent estimator of $1-s_{c_{i}}$.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 33,
      "text": "### 7.3 Expectation, Variance, and Consistency of New Credit $\\left(\\hat{s}_{n c_{i}}\\right)$\n\nFor the new credit risk score, $\\hat{s}_{n c_{i}}$, we compute the expectation, variance, and consistency.\nGiven:\n\n$$\n\\hat{s}_{n c_{i}}=\\frac{\\sum_{j=1}^{n} Y_{i, j}}{n}\n$$\n\nwhere $Y_{i, j}$ is a Bernoulli random variable such that\n\n$$\nY_{i, j}= \\begin{cases}1, & \\text { if } L_{i, j} \\geq \\mu_{L_{i}} \\text { and } \\Delta D_{i, j} \\leq \\mu_{\\Delta D_{i}} \\\\ 0, & \\text { otherwise }\\end{cases}\n$$\n\nIn our model, we assume the following:\nLoan Amount Distribution $\\left(L_{i, j}\\right)$ : The loan amounts are modeled as a Pareto random variable with minimum value $x_{m}$ and shape parameter $\\alpha$. That is,\n\n$$\nP\\left(L_{i, j} \\geq u\\right)=\\left(\\frac{x_{m}}{u}\\right)^{\\alpha}, \\quad \\text { for } u \\geq x_{m}\n$$\n\nSetting $u=\\mu_{L_{i}}$ (the mean loan amount threshold) gives\n\n$$\nP\\left(L_{i, j} \\geq \\mu_{L_{i}}\\right)=\\left(\\frac{x_{m}}{\\mu_{L_{i}}}\\right)^{\\alpha}\n$$\n\nThe loan dates are assumed to be independently drawn from Uniform $(0,1)$. When sorted, consider three consecutive order statistics\n\n$$\nU_{(j-1)}, U_{(j)}, U_{(j+1)}\n$$\n\nwith spacings\n\n$$\nX=U_{(j)}-U_{(j-1)} \\quad \\text { and } \\quad Y=U_{(j+1)}-U_{(j)}\n$$\n\nThe joint density of $(X, Y)$ is\n\n$$\nf_{X, Y}(x, y)=n(n-1)(1-x-y)^{n-2}, \\quad x>0, y>0, x+y<1\n$$\n\nDefining\n\n$$\n\\Delta D_{i, j}=\\min \\{X, Y\\}\n$$\n\nwe obtain\n\n$$\nP\\left(\\Delta D_{i, j} \\leq z\\right)=1-(1-2 z)^{n}, \\quad 0 \\leq z \\leq \\frac{1}{2}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 34,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\nThus, for a threshold $\\mu_{\\Delta D_{i}}$ (with $0 \\leq \\mu_{\\Delta D_{i}} \\leq \\frac{1}{2}$ ),\n\n$$\nP\\left(\\Delta D_{i, j} \\leq \\mu_{\\Delta D_{i}}\\right)=1-\\left(1-2 \\mu_{\\Delta D_{i}}\\right)^{n}\n$$\n\nAssuming independence between $L_{i, j}$ and $\\Delta D_{i, j}$, the probability of a \"risky\" event for each loan is\n\n$$\ns_{n c_{i}}=P\\left(L_{i, j} \\geq \\mu_{L_{i}}\\right) \\times P\\left(\\Delta D_{i, j} \\leq \\mu_{\\Delta D_{i}}\\right)=\\left(\\frac{x_{m}}{\\mu_{L_{i}}}\\right)^{\\alpha}\\left[1-\\left(1-2 \\mu_{\\Delta D_{i}}\\right)^{n}\\right]\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 35,
      "text": "### 7.3.1 Expectation of $\\hat{s}_{n c_{i}}$\n\nBy linearity of expectation, the expectation of $\\hat{s}_{n c_{i}}$ is\n\n$$\nE\\left(\\hat{s}_{n c_{i}}\\right)=E\\left(\\frac{\\sum_{j=1}^{n} Y_{i, j}}{n}\\right)=\\frac{1}{n} \\sum_{j=1}^{n} E\\left(Y_{i, j}\\right)=s_{n c_{i}}\n$$\n\nTherefore, $\\hat{s}_{n c_{i}}$ is an unbiased estimator of $s_{n c_{i}}$.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 36,
      "text": "### 7.3.2 Variance of $\\hat{s}_{n c_{i}}$\n\nThe variance of $\\hat{s}_{n c_{i}}$ is given by\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{n c_{i}}\\right)=\\operatorname{Var}\\left(\\frac{\\sum_{j=1}^{n} Y_{i, j}}{n}\\right)=\\frac{1}{n^{2}} \\sum_{j=1}^{n} \\operatorname{Var}\\left(Y_{i, j}\\right)\n$$\n\nSince $Y_{i, j} \\sim \\operatorname{Bernoulli}\\left(s_{n c_{i}}\\right)$, it follows that $\\operatorname{Var}\\left(Y_{i, j}\\right)=s_{n c_{i}}\\left(1-s_{n c_{i}}\\right)$, hence\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{n c_{i}}\\right)=\\frac{s_{n c_{i}}\\left(1-s_{n c_{i}}\\right)}{n}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 37,
      "text": "### 7.3.3 Consistency of $\\hat{s}_{n c_{i}}$\n\nFor consistency, we need to check if $\\hat{s}_{n c_{i}}$ converges in probability to $s_{n c_{i}}$ as $n \\rightarrow \\infty$. Since\n\n$$\nE\\left(\\hat{s}_{n c_{i}}\\right)=s_{n c_{i}}\n$$\n\nand\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{n c_{i}}\\right)=\\frac{s_{n c_{i}}\\left(1-s_{n c_{i}}\\right)}{n} \\rightarrow 0 \\quad \\text { as } n \\rightarrow \\infty\n$$\n\nby the law of large numbers, $\\hat{s}_{n c_{i}}$ is a consistent estimator of $s_{n c_{i}}$.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 38,
      "text": "### 7.4 Expectation, Variance and Consistency of On-Chain Transaction Score\n\nIn this section, we analyze the on-chain transaction score $\\hat{s}_{c t_{i}}$, which evaluates the transactional behavior of a wallet based on recent on-chain transactions. We assume that the transaction amounts $T_{i, l}$ follow a Pareto distribution, which is commonly used for modeling heavy-tailed data in financial contexts, while the transaction weights $t_{i, l}$ are fixed non-stochastic values that weight recent transactions more heavily.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 39,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\nThe Pareto distribution is a suitable model for transaction data, as it captures the presence of infrequent, high-value transactions within a large number of smaller transactions. We model the transaction amount $T_{i, l}$ for the $i$-th wallet's $l$-th transaction as:\n\n$$\nT_{i, l} \\sim \\operatorname{Pareto}\\left(\\alpha, x_{\\min }\\right)\n$$\n\nwhere:\n\n- $\\alpha>1$ is the shape parameter, controlling the \"heaviness\" of the distribution tail,\n- $x_{\\min }$ is the minimum transaction amount, such that $T_{i, l} \\geq x_{\\min }$.\n\nThis distribution choice allows for tractable calculations of expectation and variance while realistically modeling the likelihood of large transaction values, which are essential for assessing risk.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 40,
      "text": "### 7.4.1 Expectation of $\\hat{s}_{c t_{i}}$\n\nThe on-chain transaction score $\\hat{s}_{c t_{i}}$ is defined as:\n\n$$\n\\hat{s}_{c t_{i}}=\\frac{\\sum_{l} T_{i, l} t_{i, l}}{\\sum_{l}\\left|T_{i, l}\\right|}\n$$\n\nwhere $T_{i, l}$ represents the transaction amount, and $t_{i, l}$ is a weight associated with the $l$-th transaction. Assuming $T_{i, l} \\sim \\operatorname{Pareto}\\left(\\alpha, x_{\\min }\\right)$, we calculate $E\\left[\\hat{s}_{c t_{i}}\\right]$ as follows.\n\nLet $T_{i, l}$ denote the $l$-th transaction amount (credited or debited) for the $i$-th wallet. Define:\n\n- $T$ as the transaction amount, with $T_{i, l}$ being positive for credits and negative for debits.\n- $t$ as the recency score is assumed to be uniformly distributed over $[0,1]$, i.e.,\n\n$$\nt \\sim \\operatorname{Uniform}(0,1)\n$$\n\n- $S$ as the sign variable:\n\n$$\nS= \\begin{cases}+1, & \\text { if credited } \\\\ -1, & \\text { if debited }\\end{cases}\n$$\n\nwith probability $P(S=+1)=p$ and $P(S=-1)=1-p$.\n\nA transaction is given by:\n\n$$\nT=S A\n$$\n\nwhere $A$ is the absolute transaction amount.\nDefine:\n\n$$\n\\begin{aligned}\n& X=S A t \\\\\n& Y=A\n\\end{aligned}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 41,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\nWe approximate the expectation of the ratio $E[X / Y]$ using a second-order Taylor expansion:\n\n$$\ng(X, Y)=\\frac{X}{Y}\n$$\n\nExpanding around $\\left(\\mu_{X}, \\mu_{Y}\\right)$ :\n\n$$\n\\begin{gathered}\ng(X, Y) \\approx g\\left(\\mu_{X}, \\mu_{Y}\\right)+\\left(X-\\mu_{X}\\right) g_{X}\\left(\\mu_{X}, \\mu_{Y}\\right)+\\left(Y-\\mu_{Y}\\right) g_{Y}\\left(\\mu_{X}, \\mu_{Y}\\right) \\\\\n+\\frac{1}{2}\\left[g_{x x}\\left(\\mu_{X}, \\mu_{Y}\\right)\\left(X-\\mu_{X}\\right)^{2}+2 g_{x y}\\left(\\mu_{X}, \\mu_{Y}\\right)\\left(X-\\mu_{X}\\right)\\left(Y-\\mu_{Y}\\right)+g_{y y}\\left(\\mu_{X}, \\mu_{Y}\\right)\\left(Y-\\mu_{Y}\\right)^{2}\\right]\n\\end{gathered}\n$$\n\nComputing derivatives:\n\n$$\n\\begin{aligned}\ng_{X} & =\\frac{1}{Y}, & g_{Y} & =-\\frac{X}{Y^{2}} \\\\\ng_{X X} & =0, & g_{X Y} & =-\\frac{1}{Y^{2}}, & g_{Y Y} & =\\frac{2 X}{Y^{3}}\n\\end{aligned}\n$$\n\nEvaluating at $\\left(\\mu_{X}, \\mu_{Y}\\right)$ :\n\n$$\n\\begin{aligned}\ng\\left(\\mu_{X}, \\mu_{Y}\\right) & =\\frac{\\mu_{X}}{\\mu_{Y}}=\\mu_{S} \\mu_{t} \\\\\ng_{X}\\left(\\mu_{X}, \\mu_{Y}\\right) & =\\frac{1}{\\mu_{Y}}=\\frac{1}{\\mu_{A}} \\\\\ng_{Y}\\left(\\mu_{X}, \\mu_{Y}\\right) & =-\\frac{\\mu_{X}}{\\mu_{Y}^{2}}=-\\frac{\\mu_{S} \\mu_{t}}{\\mu_{A}} \\\\\ng_{X Y}\\left(\\mu_{X}, \\mu_{Y}\\right) & =-\\frac{1}{\\mu_{A}^{2}} \\\\\ng_{Y Y}\\left(\\mu_{X}, \\mu_{Y}\\right) & =\\frac{2 \\mu_{X}}{\\mu_{A}^{3}}=\\frac{2 \\mu_{S} \\mu_{t}}{\\mu_{A}^{2}}\n\\end{aligned}\n$$\n\nSince $E\\left[X-\\mu_{X}\\right]=0$ and $E\\left[Y-\\mu_{Y}\\right]=0$, the first-order terms vanish. The second order correction is:\n\n$$\n\\Delta=\\frac{1}{2}\\left[2\\left(-\\frac{1}{\\mu_{A}^{2}}\\right) \\operatorname{Cov}(X, Y)+\\frac{2 \\mu_{S} \\mu_{t}}{\\mu_{A}^{2}} \\operatorname{Var}(Y)\\right]\n$$\n\nSimplifying:\n\n$$\n\\Delta=-\\frac{\\operatorname{Cov}(X, Y)}{\\mu_{A}^{2}}+\\frac{\\mu_{S} \\mu_{t} \\operatorname{Var}(Y)}{\\mu_{A}^{2}}\n$$\n\nSince:\n\n$$\n\\begin{aligned}\n\\operatorname{Var}(Y) & =\\sigma_{A}^{2} \\\\\n\\operatorname{Cov}(X, Y) & =\\mu_{S} \\mu_{t} \\sigma_{A}^{2}\n\\end{aligned}\n$$\n\nwe get:\n\n$$\n\\Delta=-\\frac{\\mu_{S} \\mu_{t} \\sigma_{A}^{2}}{\\mu_{A}^{2}}+\\frac{\\mu_{S} \\mu_{t} \\sigma_{A}^{2}}{\\mu_{A}^{2}}=0\n$$\n\nThus, the expectation simplifies to:\n\n$$\nE\\left[\\hat{s}_{c t}\\right]=\\mu_{S} \\mu_{t}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 42,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\nwhere\n\n$$\n\\mu_{S}=2 p-1, \\quad \\text { with } p=P(T>0)\n$$\n\nand\n\n$$\n\\mu_{t}=0.5\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 43,
      "text": "### 7.4.2 Variance of On-Chain Transaction Score $\\operatorname{Var}\\left(\\hat{s}_{c t_{i}}\\right)$\n\nTo compute the variance of the on-chain transaction score $\\hat{s}_{c t_{i}}$, we use the second order approximation.\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{c t_{i}}\\right) \\approx g_{X}^{2} \\operatorname{Var}(X)+g_{Y}^{2} \\operatorname{Var}(Y)+2 g_{X} g_{Y} \\operatorname{Cov}(X, Y)\n$$\n\nFrom our earlier derivative calculations:\n\n$$\n\\begin{gathered}\ng_{X}=\\frac{1}{\\mu_{A}}, \\quad g_{Y}=-\\frac{\\mu_{S} \\mu_{t}}{\\mu_{A}} \\\\\n\\operatorname{Var}(X)=E\\left[X^{2}\\right]-(E[X])^{2}\n\\end{gathered}\n$$\n\nSince $X=S A t$, we expand:\n\n$$\n\\begin{aligned}\n& E[X]=E[S A t]=E[S] E[A] E[t]=\\mu_{S} \\mu_{A} \\mu_{t} \\\\\n& E\\left[X^{2}\\right]=E\\left[S^{2} A^{2} t^{2}\\right]=E\\left[S^{2}\\right] E\\left[A^{2}\\right] E\\left[t^{2}\\right]\n\\end{aligned}\n$$\n\nSince $S$ is a binary variable, we have:\n\n$$\nE\\left[S^{2}\\right]=1\n$$\n\nFor $A$ (which follows a Pareto distribution),\n\n$$\nE\\left[A^{2}\\right]=\\frac{\\alpha x_{\\min }^{2}}{(\\alpha-2)}, \\quad \\text { for } \\alpha>2\n$$\n\nFor the recency score $t$ :\n\n$$\nE\\left[t^{2}\\right]=\\operatorname{Var}(t)+(E[t])^{2}=\\sigma_{t}^{2}+\\mu_{t}^{2}\n$$\n\nThus,\n\n$$\nE\\left[X^{2}\\right]=E\\left[A^{2}\\right] E\\left[t^{2}\\right]\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 44,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\nFinally, we compute the variance:\n\n$$\n\\begin{aligned}\n\\operatorname{Var}(X) & =E\\left[X^{2}\\right]-(E[X])^{2} \\\\\n& =\\left(\\frac{\\alpha x_{\\min }^{2}}{(\\alpha-2)}\\left(\\sigma_{t}^{2}+\\mu_{t}^{2}\\right)\\right)-\\mu_{S}^{2} \\mu_{A}^{2} \\mu_{t}^{2}\n\\end{aligned}\n$$\n\nSimilarly, the variance of $Y$ is given by:\n\n$$\n\\operatorname{Var}(Y)=\\sigma_{A}^{2}=\\frac{x_{\\min }^{2} \\alpha}{(\\alpha-1)^{2}(\\alpha-2)}, \\quad \\text { for } \\alpha>2\n$$\n\nThe covariance term is given by:\n\n$$\n\\operatorname{Cov}(X, Y)=\\mu_{S} \\mu_{t} \\sigma_{A}^{2}\n$$\n\nSince $\\mu_{S}=2 p-1$, we substitute:\n\n$$\n\\mu_{S}^{2}=(2 p-1)^{2}\n$$\n\nNow, the full variance expression becomes:\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{c t_{i}}\\right) \\approx \\frac{1}{\\left(\\frac{\\alpha x_{\\min }}{\\alpha-1}\\right)^{2}}\\left[\\frac{\\alpha x_{\\min }^{2}}{\\alpha-2}\\left(\\sigma_{t}^{2}+\\mu_{t}^{2}\\right)-\\left((2 p-1) \\mu_{t} \\frac{\\alpha x_{\\min }}{\\alpha-1}\\right)^{2}\\right]+\\left[\\frac{(2 p-1)^{2} \\mu_{t}^{2}}{\\left(\\frac{\\alpha x_{\\min }}{\\alpha-1}\\right)^{2}}-\\frac{2(2 p-1)^{2} \\mu_{t}^{2}}{\\left(\\frac{\\alpha x_{\\min }}{\\alpha-1}\\right)^{2}}\\right] \\frac{\\alpha x_{\\min }^{2}}{(\\alpha-2)(\\alpha-1)^{2}}\n$$\n\nThen the variance becomes\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{c t_{i}}\\right) \\approx \\frac{1}{\\mu_{A}^{2}}\\left[\\frac{\\alpha x_{\\min }^{2}}{\\alpha-2}\\left(\\sigma_{t}^{2}+\\mu_{t}^{2}\\right)-\\left((2 p-1) \\mu_{t} \\mu_{A}\\right)^{2}\\right]-\\frac{(2 p-1)^{2} \\mu_{t}^{2}}{\\mu_{A}^{2}} \\frac{\\alpha x_{\\min }^{2}}{(\\alpha-2)(\\alpha-1)^{2}}\n$$\n\nLet us simplify the first term:\n\n$$\n\\frac{1}{\\mu_{A}^{2}} \\frac{\\alpha x_{\\min }^{2}}{\\alpha-2}=\\frac{\\alpha x_{\\min }^{2}}{\\mu_{A}^{2}(\\alpha-2)}=\\frac{\\alpha x_{\\min }^{2}}{\\frac{\\alpha^{2} x_{\\min }^{2}}{(\\alpha-1)^{2}}(\\alpha-2)}=\\frac{(\\alpha-1)^{2}}{\\alpha(\\alpha-2)}\n$$\n\nand note that\n\n$$\n\\frac{1}{\\mu_{A}^{2}}\\left((2 p-1) \\mu_{t} \\mu_{A}\\right)^{2}=(2 p-1)^{2} \\mu_{t}^{2}\n$$\n\nThus, the first term simplifies to\n\n$$\n\\frac{(\\alpha-1)^{2}}{\\alpha(\\alpha-2)}\\left(\\sigma_{t}^{2}+\\mu_{t}^{2}\\right)-(2 p-1)^{2} \\mu_{t}^{2}\n$$\n\nNext, simplify the second term:\n\n$$\n\\frac{1}{\\mu_{A}^{2}} \\frac{\\alpha x_{\\min }^{2}}{(\\alpha-2)(\\alpha-1)^{2}}=\\frac{1}{\\alpha(\\alpha-2)}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 45,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\nso that the second term becomes\n\n$$\n-\\frac{(2 p-1)^{2} \\mu_{t}^{2}}{\\alpha(\\alpha-2)}\n$$\n\nCombining both parts, we obtain:\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{c t_{i}}\\right) \\approx \\frac{(\\alpha-1)^{2}}{\\alpha(\\alpha-2)}\\left(\\sigma_{t}^{2}+\\mu_{t}^{2}\\right)-(2 p-1)^{2} \\mu_{t}^{2}\\left(1+\\frac{1}{\\alpha(\\alpha-2)}\\right)\n$$\n\nThus, combining both parts, we obtain the variance for a single transaction:\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{c t_{i}}\\right) \\approx \\frac{(\\alpha-1)^{2}}{\\alpha(\\alpha-2)}\\left[\\left(\\sigma_{t}^{2}+\\mu_{t}^{2}\\right)-(2 p-1)^{2} \\mu_{t}^{2}\\right]\n$$\n\nSince $\\hat{s}_{c t_{i}}$ is computed from $n$ independent transactions, by the properties of i.i.d. random variables, the variance of the estimator decreases as $1 / n$. Therefore, the final corrected variance is\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{c t_{i}}\\right) \\approx \\frac{1}{n} \\frac{(\\alpha-1)^{2}}{\\alpha(\\alpha-2)}\\left[\\left(\\sigma_{t}^{2}+\\mu_{t}^{2}\\right)-(2 p-1)^{2} \\mu_{t}^{2}\\right]\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 46,
      "text": "### 7.4.3 Consistency of $\\hat{s}_{c t_{i}}$\n\nRecall that the variance of the on-chain transaction score is given by\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{c t_{i}}\\right) \\approx \\frac{1}{n} \\frac{(\\alpha-1)^{2}}{\\alpha(\\alpha-2)}\\left[\\left(\\sigma_{t}^{2}+\\mu_{t}^{2}\\right)-(2 p-1)^{2} \\mu_{t}^{2}\\right]\n$$\n\nAs $n \\rightarrow \\infty$, the factor $\\frac{1}{n}$ drives the variance to zero:\n\n$$\n\\lim _{n \\rightarrow \\infty} \\operatorname{Var}\\left(\\hat{s}_{c t_{i}}\\right)=0\n$$\n\nThis implies that the estimator $\\hat{s}_{c t_{i}}$ converges in probability to its expected value $E\\left[\\hat{s}_{c t_{i}}\\right]=(2 p-1) \\mu_{t}$. Hence, $\\hat{s}_{c t_{i}}$ is a consistent estimator of the on-chain transaction score.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 47,
      "text": "### 7.5 Expectation,Variance and Consistency of the Credit Utilization Score:\n### 7.5.1 Derivation of the Expectation of the Credit Utilization Score\n\nRecall that the credit utilization score is defined as\n\n$$\n\\hat{s}_{c u_{i}}=\\frac{N_{i}}{D_{i}}=\\frac{\\sum_{j=1}^{n}\\left(L_{i j}-\\frac{L_{i j}^{2}}{Y_{i j}}\\right)}{\\sum_{j=1}^{n} L_{i j}}\n$$\n\nwith\n\n$$\nY_{i j}=C_{i j} \\times L T V_{i j}\n$$\n\nand we assume that conditionally\n\n$$\nL_{i j} \\mid Y_{i j} \\sim \\operatorname{Uniform}\\left(0, Y_{i j}\\right)\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 48,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\nFor a single loan, the conditional moments are\n\n$$\n\\mathbb{E}\\left[L_{i j} \\mid Y_{i j}\\right]=\\frac{Y_{i j}}{2}, \\quad \\mathbb{E}\\left[L_{i j}^{2} \\mid Y_{i j}\\right]=\\frac{Y_{i j}^{2}}{3}\n$$\n\nDefining\n\n$$\nN_{i j}=L_{i j}-\\frac{L_{i j}^{2}}{Y_{i j}}\n$$\n\nwe have\n\n$$\n\\mathbb{E}\\left[N_{i j} \\mid Y_{i j}\\right]=\\frac{Y_{i j}}{2}-\\frac{1}{Y_{i j}} \\cdot \\frac{Y_{i j}^{2}}{3}=\\frac{Y_{i j}}{6}\n$$\n\nTaking the unconditional expectation (via the law of iterated expectation) gives\n\n$$\n\\mathbb{E}\\left[N_{i j}\\right]=\\frac{\\mathbb{E}\\left[Y_{i j}\\right]}{6}, \\quad \\mathbb{E}\\left[L_{i j}\\right]=\\frac{\\mathbb{E}\\left[Y_{i j}\\right]}{2}\n$$\n\nFor a borrower with $n$ independent loans, define\n\n$$\nN_{i}=\\sum_{j=1}^{n} N_{i j} \\quad \\text { and } \\quad D_{i}=\\sum_{j=1}^{n} L_{i j}\n$$\n\nThen,\n\n$$\n\\mathbb{E}\\left[N_{i}\\right]=n \\frac{\\mathbb{E}[Y]}{6}, \\quad \\mathbb{E}\\left[D_{i}\\right]=n \\frac{\\mathbb{E}[Y]}{2}\n$$\n\nThus, the first order (plug-in) estimator for credit utilization is\n\n$$\n\\frac{\\mathbb{E}\\left[N_{i}\\right]}{\\mathbb{E}\\left[D_{i}\\right]}=\\frac{\\frac{n \\mathbb{E}[Y]}{6}}{\\frac{n \\mathbb{E}[Y]}{2}}=\\frac{1}{3}\n$$\n\nAlthough conditionally\n\n$$\n\\operatorname{Cov}\\left(N_{i j}, L_{i j} \\mid Y_{i j}\\right)=0\n$$\n\nthe law of total covariance yields\n\n$$\n\\operatorname{Cov}\\left(N_{i j}, L_{i j}\\right)=\\operatorname{Cov}\\left(\\frac{Y_{i j}}{6}, \\frac{Y_{i j}}{2}\\right)=\\frac{1}{12} \\operatorname{Var}\\left(Y_{i j}\\right)\n$$\n\nAssuming all $Y_{i j}$ share the same variance $\\operatorname{Var}(Y)$, we have for $n$ loans:\n\n$$\n\\operatorname{Cov}\\left(N_{i}, D_{i}\\right)=n \\frac{\\operatorname{Var}(Y)}{12}\n$$\n\nAlso, for a single loan,\n\n$$\n\\operatorname{Var}\\left(L_{i j}\\right)=\\frac{\\mathbb{E}\\left[Y^{2}\\right]}{3}-\\frac{\\mathbb{E}[Y]^{2}}{4}\n$$\n\nso that\n\n$$\n\\operatorname{Var}\\left(D_{i}\\right)=n\\left(\\frac{\\mathbb{E}\\left[Y^{2}\\right]}{3}-\\frac{\\mathbb{E}[Y]^{2}}{4}\\right)\n$$\n\nFor a function $g\\left(N_{i}, D_{i}\\right)=N_{i} / D_{i}$, a second-order Taylor expansion about\n\n$$\n\\left(\\mu_{X}, \\mu_{Y}\\right)=\\left(\\mathbb{E}\\left[N_{i}\\right], \\mathbb{E}\\left[D_{i}\\right]\\right)\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 49,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\ngives\n\n$$\n\\mathbb{E}\\left[\\frac{N_{i}}{D_{i}}\\right] \\approx \\frac{\\mathbb{E}\\left[N_{i}\\right]}{\\mathbb{E}\\left[D_{i}\\right]}-\\frac{\\operatorname{Cov}\\left(N_{i}, D_{i}\\right)}{\\mathbb{E}\\left[D_{i}\\right]^{2}}+\\frac{\\mathbb{E}\\left[N_{i}\\right] \\operatorname{Var}\\left(D_{i}\\right)}{\\mathbb{E}\\left[D_{i}\\right]^{3}}\n$$\n\nSubstitute the expressions obtained above:\n\n$$\n\\begin{gathered}\n\\frac{\\mathbb{E}\\left[N_{i}\\right]}{\\mathbb{E}\\left[D_{i}\\right]}=\\frac{1}{3} \\\\\n-\\frac{\\operatorname{Cov}\\left(N_{i}, D_{i}\\right)}{\\mathbb{E}\\left[D_{i}\\right]^{2}}=-\\frac{n \\frac{\\operatorname{Var}(Y)}{12}}{\\left(n \\frac{\\mathbb{E}[Y]}{2}\\right)^{2}}=-\\frac{\\operatorname{Var}(Y)}{12} \\cdot \\frac{4}{n \\mathbb{E}[Y]^{2}}=-\\frac{\\operatorname{Var}(Y)}{3 n \\mathbb{E}[Y]^{2}} \\\\\n\\frac{\\mathbb{E}\\left[N_{i}\\right] \\operatorname{Var}\\left(D_{i}\\right)}{\\mathbb{E}\\left[D_{i}\\right]^{3}}=\\frac{\\left(n \\frac{\\mathbb{E}[Y]}{6}\\right) n\\left(\\frac{\\mathbb{E}[Y^{2}]}{3}-\\frac{\\mathbb{E}[Y]^{2}}{4}\\right)}{\\left(n \\frac{\\mathbb{E}[Y]}{2}\\right)^{3}}\n\\end{gathered}\n$$\n\nSimplify as follows:\n\n$$\n\\begin{gathered}\n\\text { Numerator }=\\frac{n^{2} \\mathbb{E}[Y]}{6}\\left(\\frac{\\mathbb{E}[Y^{2}]}{3}-\\frac{\\mathbb{E}[Y]^{2}}{4}\\right) \\\\\n\\text { Denominator }=\\frac{n^{3} \\mathbb{E}[Y]^{3}}{8}\n\\end{gathered}\n$$\n\nso that\n\n$$\n\\frac{\\mathbb{E}\\left[N_{i}\\right] \\operatorname{Var}\\left(D_{i}\\right)}{\\mathbb{E}\\left[D_{i}\\right]^{3}}=\\frac{8}{6 n \\mathbb{E}[Y]^{2}}\\left(\\frac{\\mathbb{E}\\left[Y^{2}\\right]}{3}-\\frac{\\mathbb{E}[Y]^{2}}{4}\\right)=\\frac{4}{3 n \\mathbb{E}[Y]^{2}}\\left(\\frac{\\mathbb{E}\\left[Y^{2}\\right]}{3}-\\frac{\\mathbb{E}[Y]^{2}}{4}\\right)\n$$\n\nCombining the three terms, we obtain\n\n$$\n\\mathbb{E}\\left[\\hat{s}_{c u_{i}}\\right] \\approx \\frac{1}{3}-\\frac{\\operatorname{Var}(Y)}{3 n \\mathbb{E}[Y]^{2}}+\\frac{4}{3 n \\mathbb{E}[Y]^{2}}\\left(\\frac{\\mathbb{E}\\left[Y^{2}\\right]}{3}-\\frac{\\mathbb{E}[Y]^{2}}{4}\\right)\n$$\n\nNoting that\n\n$$\n\\operatorname{Var}(Y)=\\mathbb{E}\\left[Y^{2}\\right]-\\mathbb{E}[Y]^{2}\n$$\n\nand combining the correction terms over a common denominator, one obtains\n\n$$\n\\mathbb{E}\\left[\\hat{s}_{c u_{i}}\\right] \\approx \\frac{1}{3}+\\frac{\\mathbb{E}\\left[Y^{2}\\right]}{9 n \\mathbb{E}[Y]^{2}}\n$$\n\nThis completes the derivation of the expectation of the credit utilization score using the delta method.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 50,
      "text": "### 7.5.2 Derivation of the Variance of the Credit Utilization subscore\n\nUsing the delta method for the function\n\n$$\ng\\left(N_{i}, D_{i}\\right)=\\frac{N_{i}}{D_{i}}\n$$\n\nits first-order Taylor expansion yields the approximate variance",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 51,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\n$$\n\\begin{aligned}\n& \\operatorname{Var}\\left(\\frac{N_{i}}{D_{i}}\\right) \\approx\\left(\\left.\\frac{\\partial g}{\\partial N_{i}}\\right|_{\\left(\\mu_{X}, \\mu_{Y}\\right)}\\right)^{2} \\operatorname{Var}\\left(N_{i}\\right)+\\left(\\left.\\frac{\\partial g}{\\partial D_{i}}\\right|_{\\left(\\mu_{X}, \\mu_{Y}\\right)}\\right)^{2} \\operatorname{Var}\\left(D_{i}\\right) \\\\\n& +2\\left.\\frac{\\partial g}{\\partial N_{i}}\\right|_{\\left(\\mu_{X}, \\mu_{Y}\\right)} \\frac{\\partial g}{\\partial D_{i}} \\right|_{\\left(\\mu_{X}, \\mu_{Y}\\right)} \\operatorname{Cov}\\left(N_{i}, D_{i}\\right)\n\\end{aligned}\n$$\n\nwhere\n\n$$\n\\frac{\\partial g}{\\partial N_{i}}=\\frac{1}{D_{i}}, \\quad \\frac{\\partial g}{\\partial D_{i}}=-\\frac{N_{i}}{D_{i}^{2}}\n$$\n\nEvaluated at $\\left(\\mu_{X}, \\mu_{Y}\\right)$, this becomes\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{c u_{i}}\\right) \\approx \\frac{\\operatorname{Var}\\left(N_{i}\\right)}{\\mu_{Y}^{2}}+\\frac{\\mu_{X}^{2} \\operatorname{Var}\\left(D_{i}\\right)}{\\mu_{Y}^{4}}-\\frac{2 \\mu_{X} \\operatorname{Cov}\\left(N_{i}, D_{i}\\right)}{\\mu_{Y}^{3}}\n$$\n\nFor a single loan, recall the following conditional calculations given $L \\mid Y \\sim \\operatorname{Uniform}(0, Y)$ :\n$\\mathbb{E}[L \\mid Y]=\\frac{Y}{2}, \\quad \\mathbb{E}\\left[L^{2} \\mid Y\\right]=\\frac{Y^{2}}{3}, \\quad \\mathbb{E}\\left[L^{3} \\mid Y\\right]=\\frac{Y^{3}}{4}, \\quad \\mathbb{E}\\left[L^{4} \\mid Y\\right]=\\frac{Y^{4}}{5}$,\n$\\mathbb{E}[N \\mid Y]=\\frac{Y}{6}$, with $N=L-\\frac{L^{2}}{Y}$\nA direct calculation shows:\n\n$$\n\\mathbb{E}\\left[N^{2} \\mid Y\\right]=\\frac{Y^{2}}{30}\n$$\n\nso that\n\n$$\n\\operatorname{Var}(N \\mid Y)=\\frac{Y^{2}}{30}-\\left(\\frac{Y}{6}\\right)^{2}=\\frac{Y^{2}}{180}\n$$\n\nUnconditionally, using the law of total variance,\n\n$$\n\\operatorname{Var}(N)=\\mathbb{E}[\\operatorname{Var}(N \\mid Y)]+\\operatorname{Var}(\\mathbb{E}[N \\mid Y])=\\frac{\\mathbb{E}\\left[Y^{2}\\right]}{180}+\\frac{\\operatorname{Var}(Y)}{36}\n$$\n\nSimilarly, for $L$ we have\n\n$$\n\\operatorname{Var}(L)=\\frac{\\mathbb{E}\\left[Y^{2}\\right]}{3}-\\left(\\frac{\\mathbb{E}[Y]}{2}\\right)^{2}\n$$\n\nFor a borrower with $n$ independent loans:\n\n$$\n\\begin{aligned}\n\\mu_{X} & =\\mathbb{E}\\left[N_{i}\\right]=n \\frac{\\mathbb{E}[Y]}{6}, \\quad \\mu_{Y}=\\mathbb{E}\\left[D_{i}\\right]=n \\frac{\\mathbb{E}[Y]}{2} \\\\\n\\operatorname{Var}\\left(D_{i}\\right) & =n\\left(\\frac{\\mathbb{E}\\left[Y^{2}\\right]}{3}-\\frac{\\mathbb{E}[Y]^{2}}{4}\\right) \\\\\n\\operatorname{Var}\\left(N_{i}\\right) & =n\\left(\\frac{\\mathbb{E}\\left[Y^{2}\\right]}{180}+\\frac{\\operatorname{Var}(Y)}{36}\\right) \\\\\n\\operatorname{Cov}\\left(N_{i}, D_{i}\\right) & =n \\frac{\\operatorname{Var}(Y)}{12}\n\\end{aligned}\n$$\n\nThus, the delta method approximation for the variance of the credit utilization subscore becomes\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{c u_{i}}\\right) \\approx \\frac{n\\left(\\frac{\\mathbb{E}\\left[Y^{2}\\right]}{180}+\\frac{\\operatorname{Var}(Y)}{36}\\right)}{\\left(n \\frac{\\mathbb{E}[Y]}{2}\\right)^{2}}+\\frac{\\left(n \\frac{\\mathbb{E}[Y]}{6}\\right)^{2} n\\left(\\frac{\\mathbb{E}\\left[Y^{2}\\right]}{3}-\\frac{\\mathbb{E}[Y]^{2}}{4}\\right)}{\\left(n \\frac{\\mathbb{E}[Y]}{2}\\right)^{4}}-\\frac{2\\left(n \\frac{\\mathbb{E}[Y]}{6}\\right) n \\frac{\\operatorname{Var}(Y)}{12}}{\\left(n \\frac{\\mathbb{E}[Y]}{2}\\right)^{3}}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 52,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\nThis expression can be further simplified if desired.\n\nIn summary, we have derived the following approximate formulas using the delta method:\n\n$$\n\\mathbb{E}\\left[\\hat{s}_{c u_{i}}\\right] \\approx \\frac{\\mathbb{E}\\left[N_{i}\\right]}{\\mathbb{E}\\left[D_{i}\\right]}-\\frac{\\operatorname{Cov}\\left(N_{i}, D_{i}\\right)}{\\mathbb{E}\\left[D_{i}\\right]^{2}}+\\frac{\\mathbb{E}\\left[N_{i}\\right] \\operatorname{Var}\\left(D_{i}\\right)}{\\mathbb{E}\\left[D_{i}\\right]^{3}}\n$$\n\nand\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{c u_{i}}\\right) \\approx \\frac{\\operatorname{Var}\\left(N_{i}\\right)}{\\mathbb{E}\\left[D_{i}\\right]^{2}}+\\frac{\\mathbb{E}\\left[N_{i}\\right]^{2} \\operatorname{Var}\\left(D_{i}\\right)}{\\mathbb{E}\\left[D_{i}\\right]^{4}}-\\frac{2 \\mathbb{E}\\left[N_{i}\\right] \\operatorname{Cov}\\left(N_{i}, D_{i}\\right)}{\\mathbb{E}\\left[D_{i}\\right]^{3}}\n$$\n\nThese derivations assume that the loans are i.i.d. and that the conditional distribution $L_{i j} \\mid Y_{i j}$ is uniform on $\\left[0, Y_{i j}\\right]$.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 53,
      "text": "### 7.5.3 Consistency of credit utilization subscore\n\nTo show that the estimator $\\hat{s}_{c u_{i}}$ is consistent, we need to verify that its variance vanishes as $n \\rightarrow \\infty$ and that it converges in probability to the true parameter.\n\nFrom the variance expression:\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{c u_{i}}\\right) \\approx \\frac{n\\left(\\frac{\\mathbb{E}\\left[Y^{2}\\right]}{180}+\\frac{\\operatorname{Var}(Y)}{30}\\right)}{\\left(n \\frac{\\mathbb{E}[Y]}{2}\\right)^{2}}+\\frac{\\left(n \\frac{\\mathbb{E}[Y]}{6}\\right)^{2} n\\left(\\frac{\\mathbb{E}\\left[Y^{2}\\right]}{3}-\\frac{\\mathbb{E}[Y]^{2}}{4}\\right)}{\\left(n \\frac{\\mathbb{E}[Y]}{2}\\right)^{4}}-\\frac{2\\left(n \\frac{\\mathbb{E}[Y]}{6}\\right) n \\frac{\\operatorname{Var}(Y)}{12}}{\\left(n \\frac{\\mathbb{E}[Y]}{2}\\right)^{3}}\n$$\n\nwe analyze the asymptotic behavior as $n \\rightarrow \\infty$. Each term in the variance expression contains factors of $\\frac{1}{n}$ or higher negative powers of $n$. Specifically, the leading term behaves as:\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{c u_{i}}\\right)=\\mathcal{O}\\left(\\frac{1}{n}\\right)\n$$\n\nSince $\\operatorname{Var}\\left(\\hat{s}_{c u_{i}}\\right) \\rightarrow 0$ as $n \\rightarrow \\infty$, the estimator is asymptotically unbiased and its variance vanishes in the limit. By Chebyshev's inequality,\n\n$$\nP\\left(\\left|\\hat{s}_{c u_{i}}-s_{c u_{i}}\\right| \\geq \\epsilon\\right) \\leq \\frac{\\operatorname{Var}\\left(\\hat{s}_{c u_{i}}\\right)}{\\epsilon^{2}} \\rightarrow 0 \\quad \\text { as } n \\rightarrow \\infty\n$$\n\nThis implies $\\hat{s}_{c u_{i}} \\xrightarrow{p} s_{c u_{i}}$, meaning that $\\hat{s}_{c u_{i}}$ is a consistent estimator of $s_{c u_{i}}$.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 54,
      "text": "## 8 Asymptotic Normality of OCCR Score\n\nOur objective is to prove that the OCCR score is asymptotically normal, i.e.,\n\n$$\n\\sqrt{N}\\left(\\text { OCCR Score }-\\mu\\right) \\xrightarrow{d} \\mathcal{N}\\left(0, \\sigma^{2}\\right)\n$$\n\nwhere $\\mu$ is the expected value and $\\sigma^{2}$ is the variance of the OCCR score.\nWe analyze the asymptotic properties of each component individually.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 55,
      "text": "# 8.1 Historical Credit Risk subscore $\\left(\\hat{s}_{h_{i}}\\right)$ \n\nThe historical credit risk subscore is defined as\n\n$$\n\\hat{s}_{h_{i}}=\\frac{\\sum_{j=1}^{n} w_{i, j} X_{i, j}}{\\sum_{j=1}^{n} w_{i, j}}\n$$\n\nUnder the assumption of i.i.d. loans, by the Central Limit Theorem (CLT) we have:\n\n$$\n\\sqrt{n}\\left(\\hat{s}_{h_{i}}-s_{h_{i}}\\right) \\xrightarrow{d} \\mathcal{N}\\left(0, \\frac{s_{h_{i}}\\left(1-s_{h_{i}}\\right) \\mu_{w^{2}}}{\\mu_{w}^{2}}\\right)\n$$\n\nIn the desired format, the expectation and variance can be expressed as:\n\n$$\n\\begin{aligned}\n& \\mathbb{E}\\left[\\hat{s}_{h_{i}}\\right] \\approx s_{h_{i}}\\left(1+\\frac{\\mu_{w^{2}}-\\mu_{w}^{2}}{n \\mu_{w}^{2}}\\right) \\\\\n& \\operatorname{Var}\\left(\\hat{s}_{h_{i}}\\right) \\approx \\frac{16 s_{h_{i}}\\left(1-s_{h_{i}}\\right) \\mathbb{E}\\left[L_{i, j}^{2}\\right]}{9 n\\left(\\mathbb{E}\\left[L_{i, j}\\right]\\right)^{2}}\n\\end{aligned}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 56,
      "text": "### 8.2 Current Credit Risk subscore $\\left(\\hat{s}_{c_{i}}\\right)$\n\nThe current credit risk subscore is defined as\n\n$$\n\\hat{s}_{c_{i}}=\\frac{1}{k} \\sum_{j=1}^{k} Z_{i, j}, \\quad \\text { with } Z_{i, j} \\sim \\operatorname{Bernoulli}\\left(s_{c_{i}}\\right)\n$$\n\nThen, by the CLT:\n\n$$\n\\begin{gathered}\n\\mathbb{E}\\left[\\hat{s}_{c_{i}}\\right]=s_{c_{i}} \\\\\n\\operatorname{Var}\\left(\\hat{s}_{c_{i}}\\right)=\\frac{s_{c_{i}}\\left(1-s_{c_{i}}\\right)}{k}\n\\end{gathered}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 57,
      "text": "### 8.3 New Credit subscore $\\left(\\hat{s}_{n c_{i}}\\right)$\n\nThe new credit subscore is given by\n\n$$\n\\hat{s}_{n c_{i}}=\\frac{1}{n} \\sum_{j=1}^{n} Y_{i, j}, \\quad \\text { with } Y_{i, j} \\sim \\operatorname{Bernoulli}\\left(s_{n c_{i}}\\right)\n$$\n\nThus, we have\n\n$$\nE\\left(\\hat{s}_{n c_{i}}\\right)=s_{n c_{i}}\n$$\n\nand since $\\operatorname{Var}\\left(Y_{i, j}\\right)=s_{n c_{i}}\\left(1-s_{n c_{i}}\\right)$, it follows that\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{n c_{i}}\\right)=\\frac{s_{n c_{i}}\\left(1-s_{n c_{i}}\\right)}{n}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 58,
      "text": "# 8.4 On-Chain Transaction subscore $\\left(\\hat{s}_{c t_{i}}\\right)$ \n\nThe on-chain transaction subscore is defined as\n\n$$\n\\hat{s}_{c t_{i}}=\\frac{\\sum_{l=1}^{n} T_{i, l} t_{i, l}}{\\sum_{l=1}^{n}\\left|T_{i, l}\\right|}\n$$\n\nwhere $T_{i, l} \\sim \\operatorname{Pareto}\\left(\\alpha, x_{\\min }\\right)$. Assuming appropriate moment conditions and applying the CLT for weighted sums, we get an expectation of\n\n$$\nE\\left[\\hat{s}_{c t_{i}}\\right]=\\mu_{S} \\mu_{t}\n$$\n\nand the variance is given by\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{c t_{i}}\\right) \\approx \\frac{1}{n} \\frac{(\\alpha-1)^{2}}{\\alpha(\\alpha-2)}\\left[\\left(\\sigma_{t}^{2}+\\mu_{t}^{2}\\right)-(2 p-1)^{2} \\mu_{t}^{2}\\right]\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 59,
      "text": "### 8.5 Credit Utilization subscore $\\left(\\hat{s}_{c u_{i}}\\right)$\n\nThe credit utilization subscore is defined as\n\n$$\n\\hat{s}_{c u_{i}}=\\frac{\\sum_{j=1}^{n}\\left(1-\\frac{L_{i, j}}{C_{i, j} \\cdot L T V_{i, j}}\\right) L_{i, j}}{\\sum_{j=1}^{n} L_{i, j}}\n$$\n\nIn the target format, the expectation and variance are approximated by\n\n$$\n\\mathbb{E}\\left[\\hat{s}_{c u_{i}}\\right] \\approx \\frac{1}{3}+\\frac{\\mathbb{E}\\left[Y^{2}\\right]}{9 n \\mathbb{E}[Y]^{2}}\n$$\n\n$$\n\\operatorname{Var}\\left(\\hat{s}_{c u_{i}}\\right) \\approx \\frac{n\\left(\\frac{\\mathbb{E}\\left[Y^{2}\\right]}{180}+\\frac{\\operatorname{Var}(Y)}{36}\\right)}{\\left(n \\frac{\\mathbb{E}[Y]}{2}\\right)^{2}}+\\frac{\\left(n \\frac{\\mathbb{E}[Y]}{6}\\right)^{2} n\\left(\\frac{\\mathbb{E}\\left[Y^{2}\\right]}{3}-\\frac{\\mathbb{E}[Y]^{2}}{4}\\right)}{\\left(n \\frac{\\mathbb{E}[Y]}{2}\\right)^{4}}-\\frac{2\\left(n \\frac{\\mathbb{E}[Y]}{6}\\right) n \\frac{\\operatorname{Var}(Y)}{12}}{\\left(n \\frac{\\mathbb{E}[Y]}{2}\\right)^{3}}\n$$\n\nThe overall OCCR Score is constructed as a weighted sum of the independent component subscores:\n\n$$\n\\text { OCCR Score }=\\sum_{k=1}^{5} w_{k} \\hat{s}_{k}\n$$\n\nwith weights $w_{k}$ and component subscores $\\hat{s}_{k}$. By the continuous mapping theorem, since each $\\hat{s}_{k}$ is asymptotically normal, the OCCR Score is also asymptotically normal:\n\n$$\n\\text { OCCR Score } \\sim \\mathcal{N}\\left(\\sum_{k=1}^{5} w_{k} \\mu_{k}, \\sum_{k=1}^{5} w_{k}^{2} \\sigma_{k}^{2}\\right)\n$$\n\nwhere for each component $k$ we define:\n\n$$\n\\begin{aligned}\n\\mu_{k} & =\\mathbb{E}\\left[\\hat{s}_{k}\\right] \\\\\n\\sigma_{k}^{2} & =\\operatorname{Var}\\left(\\hat{s}_{k}\\right)\n\\end{aligned}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 60,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance \n\nIn our case, the component subscores and weights are:\n\n$$\n\\begin{array}{ll}\n\\hat{s}_{1}=\\hat{s}_{h_{i}}, & w_{1}=0.35 \\\\\n\\hat{s}_{2}=\\hat{s}_{c_{i}}, & w_{2}=0.25 \\\\\n\\hat{s}_{3}=1-\\hat{s}_{c u_{i}}, & w_{3}=0.15 \\\\\n\\hat{s}_{4}=\\hat{s}_{c t_{i}}, & w_{4}=-0.15 \\\\\n\\hat{s}_{5}=\\hat{s}_{n c_{i}}, & w_{5}=0.10\n\\end{array}\n$$\n\nThus, the overall expectation and variance of the OCCR Score are given by\n\n$$\n\\mathbb{E}[\\text { OCCR Score }]=\\sum_{k=1}^{5} w_{k} \\mu_{k} \\quad \\text { and } \\quad \\operatorname{Var}(\\text { OCCR Score })=\\sum_{k=1}^{5} w_{k}^{2} \\sigma_{k}^{2}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 61,
      "text": "## Expectation of the OCCR Score\n\nSince the expectation operator is linear, we have:\n\n$$\n\\begin{aligned}\n\\mathbb{E}[\\text { OCCR Score }]= & 0.35 \\mathbb{E}\\left[\\hat{s}_{h_{i}}\\right]+0.25 \\mathbb{E}\\left[\\hat{s}_{c_{i}}\\right]+0.15 \\mathbb{E}\\left[1-\\hat{s}_{c u_{i}}\\right] \\\\\n& -0.15 \\mathbb{E}\\left[\\hat{s}_{c t_{i}}\\right]+0.10 \\mathbb{E}\\left[\\hat{s}_{n c_{i}}\\right] \\\\\n\\approx & 0.35 s_{h_{i}}\\left(1+\\frac{\\mu_{w^{2}}-\\mu_{w}^{2}}{n \\mu_{w}^{2}}\\right)+0.25 s_{c_{i}} \\\\\n& +0.15\\left(1-\\frac{1}{3}-\\frac{\\mathbb{E}\\left[Y^{2}\\right]}{9 n \\mathbb{E}[Y]^{2}}\\right)-0.15\\left(\\mu_{S} \\cdot \\mu_{t}\\right)+0.10 s_{n c_{i}}\n\\end{aligned}\n$$\n\nHere, the overall OCCR expectation, $\\mu_{\\text {OCCR }}$, is given by:\n\n$$\n\\mu_{\\mathrm{OCCR}}=\\sum_{k=1}^{5} w_{k} \\mu_{k}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 62,
      "text": "## Variance of the OCCR Score\n# On-Chain Credit Risk Score in Decentralized Finance \n\nAssuming that the subscores are estimated independently, the variance of the OCCR Score is the sum of the variances of the weighted components:\n\n$$\n\\begin{aligned}\n\\operatorname{Var}(\\text { OCCR Score })= & (0.35)^{2} \\operatorname{Var}\\left(\\hat{s}_{h_{i}}\\right)+(0.25)^{2} \\operatorname{Var}\\left(\\hat{s}_{c_{i}}\\right)+(0.15)^{2} \\operatorname{Var}\\left(1-\\hat{s}_{c u_{i}}\\right) \\\\\n& +(0.15)^{2} \\operatorname{Var}\\left(\\hat{s}_{c t_{i}}\\right)+(0.10)^{2} \\operatorname{Var}\\left(\\hat{s}_{n c_{i}}\\right) \\\\\n\\approx & (0.35)^{2} \\cdot \\frac{16 s_{h_{i}}\\left(1-s_{h_{i}}\\right) \\mathbb{E}\\left[L_{i, j}^{2}\\right]}{9 n\\left(\\mathbb{E}\\left[L_{i, j}\\right]\\right)^{2}} \\\\\n& +(0.25)^{2} \\cdot \\frac{s_{c_{i}}\\left(1-s_{c_{i}}\\right)}{k} \\\\\n& +(0.15)^{2} \\cdot \\operatorname{Var}\\left(\\hat{s}_{c u_{i}}\\right) \\\\\n& +(0.15)^{2} \\cdot \\frac{1}{n} \\frac{(\\alpha-1)^{2}}{(\\alpha-2)}\\left[\\left(\\sigma_{t}^{2}+\\mu_{t}^{2}\\right)-(2 p-1)^{2} \\mu_{t}^{2}\\right] \\\\\n& +(0.10)^{2} \\cdot \\frac{s_{n c_{i}}\\left(1-s_{n c_{i}}\\right)}{n}\n\\end{aligned}\n$$\n\nThus, the overall variance of the OCCR Score, $\\sigma_{\\text {OCCR }}^{2}$, is given by:\n\n$$\n\\sigma_{\\text {OCCR }}^{2}=\\sum_{k=1}^{5} w_{k}^{2} \\sigma_{k}^{2}\n$$",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 63,
      "text": "## 9 Consistency of the OCCR Score\n\nEach individual estimator $\\hat{s}_{h_{i}}, \\hat{s}_{c_{i}}, \\hat{s}_{c u_{i}}, \\hat{s}_{c t_{i}}$, and $\\hat{s}_{n c_{i}}$ is assumed to be consistent for its corresponding true parameter as $n \\rightarrow \\infty$ (or $k \\rightarrow \\infty$ where applicable). Therefore, the OCCR Score, being a weighted linear combination of these consistent estimators, is itself a consistent estimator for the weighted combination of the true parameters:\n\n$$\n\\begin{aligned}\n0.35 \\frac{16 s_{h_{i}}\\left(1-s_{h_{i}}\\right) \\mathbb{E}\\left[L_{i, j}^{2}\\right]}{9 n\\left(\\mathbb{E}\\left[L_{i, j}\\right]\\right)^{2}} & +0.25 s_{c_{i}} \\\\\n& +0.15\\left[1-\\frac{2-\\left(p_{\\min }+p_{\\max }\\right)}{2}-\\frac{\\left(2-\\left(p_{\\min }+p_{\\max }\\right)\\right) \\sum_{j} \\operatorname{Var}\\left(L_{i, j}\\right)}{2\\left(\\sum_{j} \\mathbb{E}\\left[L_{i, j}\\right]\\right)^{2}}\\right] \\\\\n& -0.15\\left(\\mu_{S} \\mu_{t}\\right)+0.10 s_{n c_{i}}\n\\end{aligned}\n$$\n\nThus, as the sample size increases, the OCCR Score converges in probability to the true weighted combination of the subscores.",
      "tables": {},
      "images": {}
    },
    {
      "section_id": 64,
      "text": "# On-Chain Credit Risk Score in Decentralized Finance\n## References\n\nSahu, K. and Kumar, R. (2024). \"A secure decentralised finance framework.\" Computer Fraud \\& Security, vol. 2024, no. 3 .\n\nMoghe, M. S. and Johri, S. (n.d.). \"The Role of Credit Scoring in Modern Banking-An Overview of Methodology \\& Implementation.\"\n\nVoinov, V. G. and Nikulin, M. S. (2012). Unbiased estimators and their applications: volume 1: univariate case. Springer Science \\& Business Media, vol. 263.\n\nCreDA (2022). \"What Is a Crypto Credit Score?\" Medium, Apr. 4. [Online]. Available: https://creda-app.medium.com/what-is-a-crypto-credit-score-a34228685a5f.\n\nArnold, B. C. (2014). Pareto distribution. Wiley StatsRef: Statistics Reference Online, pp. 1-10. Wiley Online Library. CRED Protocol (n.d.). \"CRED Protocol.\" [Online]. Available: https://www.credprotocol.com/.\n\nFisher, R. A. (1925). \"Theory of statistical estimation.\" Mathematical Proceedings of the Cambridge Philosophical Society, vol. 22, no. 5, pp. 700-725. Cambridge University Press.\n\nDoerr, J. F., Kosse, A., Khan, A., Lewrick, U., Mojon, B., Nolens, B., and Rice, T. (2021). \"DeFi risks and the decentralisation illusion.\" BIS Quarterly Review, vol. 21.\n\nWolf, W., Henry, A., Fadel, H. A., Quintuna, X., and Gay, J. (2022). \"Scoring Aave accounts for creditworthiness.\" arXiv preprint arXiv:2207.07008.\n\nPackin, N. G. and Lev-Aretz, Y. (2024). \"Decentralized credit scoring: Black box 3.0.\" American Business Law Journal, vol. 61, no. 2, pp. 91-111.\n\nPerez, D., Werner, S. M., Xu, J., and Livshits, B. (2021). \"Liquidations: DeFi on a Knife-edge.\" In Financial Cryptography and Data Security: 25th International Conference, FC 2021, Virtual Event, March 1-5, 2021, Revised Selected Papers, Part II, Springer, pp. 457-476.\n\nBlock Analitica (n.d.). \"Introducing Project Levon.\" Medium, [Online]. Available: https://medium.com/block-analitica/introducing-project-levon-e1444bd888d1.",
      "tables": {},
      "images": {}
    }
  ],
  "id": "2412.00710v2",
  "authors": [
    "Rik Ghosh",
    "Arka Datta",
    "Vidhi Aggarwal",
    "Sudipan Sinha",
    "Rajdeep Sengupta"
  ],
  "categories": [
    "q-fin.RM"
  ],
  "abstract": "Decentralized Finance (DeFi), a financial ecosystem without centralized\ncontrolling organization, has introduced a new paradigm for lending and\nborrowing. However, its capital efficiency remains constrained by the inability\nto effectively assess the risk associated with each user/wallet. This paper\nintroduces the 'On-Chain Credit Risk Score (OCCR Score) in DeFi', a\nprobabilistic measure designed to quantify the credit risk associated with a\nwallet. By analyzing historical real-time on-chain activity as well as\npredictive scenarios, the OCCR Score may enable DeFi lending protocols to\ndynamically adjust Loan-to-Value (LTV) ratios and Liquidation Thresholds (LT)\nbased on the risk profile of a wallet. Unlike existing wallet risk scoring\nmodels, which rely on heuristic-based evaluations, the OCCR Score offers a more\nobjective and probabilistic approach, aligning closer to traditional credit\nrisk assessment methodologies. This framework can further enhance DeFi's\ncapital efficiency by incentivizing responsible borrowing behavior and\noptimizing risk-adjusted returns for lenders.",
  "updated": "2025-03-25T12:28:43Z",
  "published": "2024-12-01T07:18:04Z"
}